function qe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}const Bu=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},ku=e=>({httpHandler:e.httpHandler()});var Zs;(function(e){e.HEADER="header",e.QUERY="query"})(Zs||(Zs={}));var Qs;(function(e){e.HEADER="header",e.QUERY="query"})(Qs||(Qs={}));var Ft;(function(e){e.HTTP="http",e.HTTPS="https"})(Ft||(Ft={}));var dr;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(dr||(dr={}));var Ys;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Ys||(Ys={}));const Fn="__smithy_context";var Js;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Js||(Js={}));var ei;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ei||(ei={}));class Ce{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const t=new Ce({...this,headers:{...this.headers}});return t.query&&(t.query=Mu(t.query)),t}}function Mu(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}class hr{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function $u(e){return t=>async r=>{const{request:n}=r;return Ce.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}const Fu={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Uu=e=>({applyToStack:t=>{t.add($u(e),Fu)}});const Du=e=>t=>async r=>{if(!Ce.isInstance(r.request))return t(r);const{request:n}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},Lu={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ju=e=>({applyToStack:t=>{t.add(Du(e),Lu)}}),Hu=()=>(e,t)=>async r=>{var n,i;try{const s=await e(r),{clientName:o,commandName:a,logger:u,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:h}=c,d=l??t.inputFilterSensitiveLog,g=h??t.outputFilterSensitiveLog,{$metadata:y,...v}=s.output;return(n=u==null?void 0:u.info)==null||n.call(u,{clientName:o,commandName:a,input:d(r.input),output:g(v),metadata:y}),s}catch(s){const{clientName:o,commandName:a,logger:u,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l}=c,h=l??t.inputFilterSensitiveLog;throw(i=u==null?void 0:u.error)==null||i.call(u,{clientName:o,commandName:a,input:h(r.input),error:s,metadata:s.$metadata}),s}},zu={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},qu=e=>({applyToStack:t=>{t.add(Hu(),zu)}});var ti={};const ri="X-Amzn-Trace-Id",Gu="AWS_LAMBDA_FUNCTION_NAME",Vu="_X_AMZN_TRACE_ID",Wu=e=>t=>async r=>{const{request:n}=r;if(!Ce.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(ri))return t(r);const i=ti[Gu],s=ti[Vu],o=a=>typeof a=="string"&&a.length>0;return o(i)&&o(s)&&(n.headers[ri]=s),t({...r,request:n})},Ku={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Xu=e=>({applyToStack:t=>{t.add(Wu(e),Ku)}});class Ta{trace(){}debug(){}info(){}warn(){}error(){}}const Ve=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const n of t)r.push(n);return r},ke=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,pr=()=>{let e=[],t=[],r=!1;const n=new Set,i=h=>h.sort((d,g)=>ni[g.step]-ni[d.step]||si[g.priority||"normal"]-si[d.priority||"normal"]),s=h=>{let d=!1;const g=y=>{const v=Ve(y.name,y.aliases);if(v.includes(h)){d=!0;for(const R of v)n.delete(R);return!1}return!0};return e=e.filter(g),t=t.filter(g),d},o=h=>{let d=!1;const g=y=>{if(y.middleware===h){d=!0;for(const v of Ve(y.name,y.aliases))n.delete(v);return!1}return!0};return e=e.filter(g),t=t.filter(g),d},a=h=>{var d;return e.forEach(g=>{h.add(g.middleware,{...g})}),t.forEach(g=>{h.addRelativeTo(g.middleware,{...g})}),(d=h.identifyOnResolve)==null||d.call(h,l.identifyOnResolve()),h},u=h=>{const d=[];return h.before.forEach(g=>{g.before.length===0&&g.after.length===0?d.push(g):d.push(...u(g))}),d.push(h),h.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?d.push(g):d.push(...u(g))}),d},c=(h=!1)=>{const d=[],g=[],y={};return e.forEach(R=>{const N={...R,before:[],after:[]};for(const M of Ve(N.name,N.aliases))y[M]=N;d.push(N)}),t.forEach(R=>{const N={...R,before:[],after:[]};for(const M of Ve(N.name,N.aliases))y[M]=N;g.push(N)}),g.forEach(R=>{if(R.toMiddleware){const N=y[R.toMiddleware];if(N===void 0){if(h)return;throw new Error(`${R.toMiddleware} is not found when adding ${ke(R.name,R.aliases)} middleware ${R.relation} ${R.toMiddleware}`)}R.relation==="after"&&N.after.push(R),R.relation==="before"&&N.before.push(R)}}),i(d).map(u).reduce((R,N)=>(R.push(...N),R),[])},l={add:(h,d={})=>{const{name:g,override:y,aliases:v}=d,R={step:"initialize",priority:"normal",middleware:h,...d},N=Ve(g,v);if(N.length>0){if(N.some(M=>n.has(M))){if(!y)throw new Error(`Duplicate middleware name '${ke(g,v)}'`);for(const M of N){const j=e.findIndex(Q=>{var Ie;return Q.name===M||((Ie=Q.aliases)==null?void 0:Ie.some(rt=>rt===M))});if(j===-1)continue;const ne=e[j];if(ne.step!==R.step||R.priority!==ne.priority)throw new Error(`"${ke(ne.name,ne.aliases)}" middleware with ${ne.priority} priority in ${ne.step} step cannot be overridden by "${ke(g,v)}" middleware with ${R.priority} priority in ${R.step} step.`);e.splice(j,1)}}for(const M of N)n.add(M)}e.push(R)},addRelativeTo:(h,d)=>{const{name:g,override:y,aliases:v}=d,R={middleware:h,...d},N=Ve(g,v);if(N.length>0){if(N.some(M=>n.has(M))){if(!y)throw new Error(`Duplicate middleware name '${ke(g,v)}'`);for(const M of N){const j=t.findIndex(Q=>{var Ie;return Q.name===M||((Ie=Q.aliases)==null?void 0:Ie.some(rt=>rt===M))});if(j===-1)continue;const ne=t[j];if(ne.toMiddleware!==R.toMiddleware||ne.relation!==R.relation)throw new Error(`"${ke(ne.name,ne.aliases)}" middleware ${ne.relation} "${ne.toMiddleware}" middleware cannot be overridden by "${ke(g,v)}" middleware ${R.relation} "${R.toMiddleware}" middleware.`);t.splice(j,1)}}for(const M of N)n.add(M)}t.push(R)},clone:()=>a(pr()),use:h=>{h.applyToStack(l)},remove:h=>typeof h=="string"?s(h):o(h),removeByTag:h=>{let d=!1;const g=y=>{const{tags:v,name:R,aliases:N}=y;if(v&&v.includes(h)){const M=Ve(R,N);for(const j of M)n.delete(j);return d=!0,!1}return!0};return e=e.filter(g),t=t.filter(g),d},concat:h=>{var g;const d=a(pr());return d.use(h),d.identifyOnResolve(r||d.identifyOnResolve()||(((g=h.identifyOnResolve)==null?void 0:g.call(h))??!1)),d},applyToStack:a,identify:()=>c(!0).map(h=>{const d=h.step??h.relation+" "+h.toMiddleware;return ke(h.name,h.aliases)+" - "+d}),identifyOnResolve(h){return typeof h=="boolean"&&(r=h),r},resolve:(h,d)=>{for(const g of c().map(y=>y.middleware).reverse())h=g(h,d);return r&&console.log(l.identify()),h}};return l},ni={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},si={high:3,normal:2,low:1};class Zu{constructor(t){this.middlewareStack=pr(),this.config=t}send(t,r,n){const i=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,o=t.resolveMiddleware(this.middlewareStack,this.config,i);if(s)o(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return o(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const He={},ct=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){const n=String.fromCharCode(e+t);He[n]=e,ct[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){const n=String.fromCharCode(e+t),i=e+26;He[n]=i,ct[i]=n}for(let e=0;e<10;e++){He[e.toString(10)]=e+52;const t=e.toString(10),r=e+52;He[t]=r,ct[r]=t}He["+"]=62;ct[62]="+";He["/"]=63;ct[63]="/";const it=6,Bt=8,Qu=63,ms=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),n=new DataView(r);for(let i=0;i<e.length;i+=4){let s=0,o=0;for(let c=i,l=i+3;c<=l;c++)if(e[c]!=="="){if(!(e[c]in He))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);s|=He[e[c]]<<(l-c)*it,o+=it}else s>>=it;const a=i/4*3;s>>=o%Bt;const u=Math.floor(o/Bt);for(let c=0;c<u;c++){const l=(u-c-1)*Bt;n.setUint8(a+c,(s&255<<l)>>l)}}return new Uint8Array(r)},et=e=>new TextEncoder().encode(e),kt=e=>typeof e=="string"?et(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),bs=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function ws(e){let t;typeof e=="string"?t=et(e):t=e;const r=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let s=0;s<t.length;s+=3){let o=0,a=0;for(let c=s,l=Math.min(s+3,t.length);c<l;c++)o|=t[c]<<(l-c-1)*Bt,a+=Bt;const u=Math.ceil(a/it);o<<=u*it-a;for(let c=1;c<=u;c++){const l=(u-c)*it;i+=ct[(o&Qu<<l)>>l]}i+="==".slice(0,4-u)}return i}function Yu(e,t="utf-8"){return t==="base64"?ws(e):bs(e)}function Ju(e,t){return t==="base64"?Ze.mutate(ms(e)):Ze.mutate(et(e))}class Ze extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Ju(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,Ze.prototype),t}transformToString(t="utf-8"){return Yu(this,t)}}const el=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:i,checksumLocationName:s,streamHasher:o}=t,a=r!==void 0&&n!==void 0&&i!==void 0&&s!==void 0&&o!==void 0,u=a?o(i,e):void 0,c=e.getReader();return new ReadableStream({async pull(l){const{value:h,done:d}=await c.read();if(d){if(l.enqueue(`0\r
`),a){const g=r(await u);l.enqueue(`${s}:${g}\r
`),l.enqueue(`\r
`)}l.close()}else l.enqueue(`${(n(h)||0).toString(16)}\r
${h}\r
`)}})},je=e=>encodeURIComponent(e).replace(/[!'()*]/g,tl),tl=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function rl(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=je(r),Array.isArray(n))for(let i=0,s=n.length;i<s;i++)t.push(`${r}=${je(n[i])}`);else{let i=r;(n||typeof n=="string")&&(i+=`=${je(n)}`),t.push(i)}}return t.join("&")}function nl(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}const sl={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class _s{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new _s(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,i=this.config.keepAlive===!0;if(r!=null&&r.aborted){const v=new Error("Request aborted");return v.name="AbortError",Promise.reject(v)}let s=t.path;const o=rl(t.query||{});o&&(s+=`?${o}`),t.fragment&&(s+=`#${t.fragment}`);let a="";if(t.username!=null||t.password!=null){const v=t.username??"",R=t.password??"";a=`${v}:${R}@`}const{port:u,method:c}=t,l=`${t.protocol}//${a}${t.hostname}${u?`:${u}`:""}${s}`,d={body:c==="GET"||c==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:c};typeof AbortController<"u"&&(d.signal=r),sl.supported&&(d.keepalive=i);const g=new Request(l,d),y=[fetch(g).then(v=>{const R=v.headers,N={};for(const j of R.entries())N[j[0]]=j[1];return v.body!=null?{response:new hr({headers:N,reason:v.statusText,statusCode:v.status,body:v.body})}:v.blob().then(j=>({response:new hr({headers:N,reason:v.statusText,statusCode:v.status,body:j})}))}),nl(n)];return r&&y.push(new Promise((v,R)=>{r.onabort=()=>{const N=new Error("Request aborted");N.name="AbortError",R(N)}})),Promise.race(y)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}}const Oa=e=>typeof Blob=="function"&&e instanceof Blob?il(e):ol(e);async function il(e){const t=await al(e),r=ms(t);return new Uint8Array(r)}async function ol(e){let t=new Uint8Array(0);const r=e.getReader();let n=!1;for(;!n;){const{done:i,value:s}=await r.read();if(s){const o=t;t=new Uint8Array(o.length+s.length),t.set(o),t.set(s,o.length)}n=i}return t}function al(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const i=n.result??"",s=i.indexOf(","),o=s>-1?s+1:i.length;t(i.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const Pa={},Un={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Pa[e]=t,Un[t]=e}function Na(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in Un)t[r/2]=Un[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function he(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Pa[e[r]];return t}const ii="The stream has already been transformed.",cl=e=>{var i,s;if(!oi(e)&&!ai(e)){const o=((s=(i=e==null?void 0:e.__proto__)==null?void 0:i.constructor)==null?void 0:s.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(ii);return t=!0,await Oa(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{const a=await r();if(o==="base64")return ws(a);if(o==="hex")return he(a);if(o===void 0||o==="utf8"||o==="utf-8")return bs(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(ii);if(t=!0,oi(e))return n(e);if(ai(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},oi=e=>typeof Blob=="function"&&e instanceof Blob,ai=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,Ia=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ze.mutate(e);if(!e)return Ze.mutate(new Uint8Array);const r=t.streamCollector(e);return Ze.mutate(await r)};class Ba{constructor(){this.middlewareStack=pr()}static classBuilder(){return new ul}resolveMiddlewareWithContext(t,r,n,{middlewareFn:i,clientName:s,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:c,additionalContext:l,CommandCtor:h}){for(const R of i.bind(this)(h,t,r,n))this.middlewareStack.use(R);const d=t.concat(this.middlewareStack),{logger:g}=r,y={logger:g,clientName:s,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[Fn]:{...c},...l},{requestHandler:v}=r;return d.resolve(R=>v.handle(R.request,n||{}),y)}}class ul{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let r;return r=class extends Ba{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this)}resolveMiddleware(n,i,s){return this.resolveMiddlewareWithContext(n,i,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const Qe="***SensitiveInformation***",Ss=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},ll=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&$a.warn(Ma(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},fl=Math.ceil(2**127*(2-2**-23)),ci=e=>{const t=ll(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>fl)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Dn=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},ui=e=>vs(e,32),li=e=>vs(e,16),fi=e=>vs(e,8),vs=(e,t)=>{const r=Dn(e);if(r!==void 0&&dl(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},dl=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Vt=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},ka=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},X=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return $a.warn(Ma(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},hl=e=>ci(typeof e=="string"?Wt(e):e),pl=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Wt=e=>{const t=e.match(pl);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},gl=e=>Dn(typeof e=="string"?Wt(e):e),di=e=>ui(typeof e=="string"?Wt(e):e),yl=e=>li(typeof e=="string"?Wt(e):e),ml=e=>fi(typeof e=="string"?Wt(e):e),Ma=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),$a={warn:console.warn},bl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fa=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function wl(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),s=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),u=i<10?`0${i}`:`${i}`,c=s<10?`0${s}`:`${s}`,l=o<10?`0${o}`:`${o}`,h=a<10?`0${a}`:`${a}`;return`${bl[n]}, ${u} ${Fa[r]} ${t} ${c}:${l}:${h} GMT`}const _l=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Es=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=_l.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,i,s,o,a,u,c,l]=t,h=yl(Ua(n)),d=Mt(i,"month",1,12),g=Mt(s,"day",1,31),y=Sl(h,d,g,{hours:o,minutes:a,seconds:u,fractionalMilliseconds:c});return l.toUpperCase()!="Z"&&y.setTime(y.getTime()-Cl(l)),y},Sl=(e,t,r,n)=>{const i=t-1;return El(e,i,r),new Date(Date.UTC(e,i,r,Mt(n.hours,"hour",0,23),Mt(n.minutes,"minute",0,59),Mt(n.seconds,"seconds",0,60),Al(n.fractionalMilliseconds)))},vl=[31,28,31,30,31,30,31,31,30,31,30,31],El=(e,t,r)=>{let n=vl[t];if(t===1&&xl(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Fa[t]} in ${e}: ${r}`)},xl=e=>e%4===0&&(e%100!==0||e%400===0),Mt=(e,t,r,n)=>{const i=ml(Ua(e));if(i<r||i>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return i},Al=e=>e==null?0:hl("0."+e)*1e3,Cl=e=>{const t=e[0];let r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const n=Number(e.substring(1,3)),i=Number(e.substring(4,6));return r*(n*60+i)*60*1e3},Ua=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class xs extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,xs.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const Pe=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,i])=>{(e[n]==null||e[n]==="")&&(e[n]=i)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},Rl=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const i=Ol(e),s=i.httpStatusCode?i.httpStatusCode+"":void 0,o=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||s||"UnknownError",$fault:"client",$metadata:i});throw Pe(o,t)},Tl=e=>({output:t,parsedBody:r,errorCode:n})=>{Rl({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Ol=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Pl=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Nl=e=>{const t=[];for(const r in dr){const n=dr[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},Il=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Bl=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},kl=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},Ml=e=>({...Nl(e),...Bl(e)}),$l=e=>({...Il(e),...kl(e)});function hi(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const Ln=e=>Array.isArray(e)?e:[e],Da=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Da(e[r]));return e},jn=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};jn.prototype=Object.create(String.prototype,{constructor:{value:jn,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(jn,String);function Z(e,t,r){let n,i,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return i=t,s=r,Fl(n,i,s);s=t}for(const o of Object.keys(s)){if(!Array.isArray(s[o])){n[o]=s[o];continue}Ul(n,null,s,o)}return n}const Fl=(e,t,r)=>Z(e,Object.entries(r).reduce((n,[i,s])=>(Array.isArray(s)?n[i]=s:typeof s=="function"?n[i]=[t,s()]:n[i]=[t,s],n),{})),Ul=(e,t,r,n)=>{let[i,s]=r[n];if(typeof s=="function"){let o;const a=i===void 0&&(o=s())!=null,u=typeof i=="function"&&!!i(void 0)||typeof i!="function"&&!!i;a?e[n]=o:u&&(e[n]=s())}else{const o=i===void 0&&s!=null,a=typeof i=="function"&&!!i(s)||typeof i!="function"&&!!i;(o||a)&&(e[n]=s)}},Dl=(e,t,r,n,i,s)=>{if(t!=null&&t[r]!==void 0){const o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(i,s?o.split("/").map(a=>hi(a)).join("/"):hi(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e},Ll=e=>(t,r)=>async n=>{const i=await e.region(),s=e.region;r.__s3RegionRedirect&&(e.region=async()=>(e.region=s,r.__s3RegionRedirect));const o=await t(n);if(r.__s3RegionRedirect){const a=await e.region();if(i!==a)throw new Error("Region was not restored following S3 region redirect.")}return o},jl={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function Hl(e){return(t,r)=>async n=>{var i,s;try{return await t(n)}catch(o){if(e.followRegionRedirects&&((i=o==null?void 0:o.$metadata)==null?void 0:i.httpStatusCode)===301){try{const a=o.$response.headers["x-amz-bucket-region"];(s=r.logger)==null||s.debug(`Redirecting from ${await e.region()} to ${a}`),r.__s3RegionRedirect=a}catch(a){throw new Error("Region redirect failed: "+a)}return t(n)}else throw o}}}const zl={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},ql=e=>({applyToStack:t=>{t.add(Hl(e),zl),t.addRelativeTo(Ll(e),jl)}});class vr{constructor(t={}){this.data=t,this.lastPurgeTime=Date.now()}get(t){const r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){const t=Date.now();if(!(this.lastPurgeTime+vr.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(const r in this.data){const n=this.data[r];if(!n.isRefreshing){const i=await n.identity;i.expiration&&i.expiration.getTime()<t&&delete this.data[r]}}}}vr.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;class Tr{constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}class Er{constructor(t,r=new vr){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){const n=r.Bucket,{cache:i}=this,s=i.get(n);return s?s.identity.then(o=>{var c,l;return(((c=o.expiration)==null?void 0:c.getTime())??0)<Date.now()?i.set(n,new Tr(this.getIdentity(n))).identity:((((l=o.expiration)==null?void 0:l.getTime())??0)<Date.now()+Er.REFRESH_WINDOW_MS&&!s.isRefreshing&&(s.isRefreshing=!0,this.getIdentity(n).then(h=>{i.set(n,new Tr(Promise.resolve(h)))})),o)}):i.set(n,new Tr(this.getIdentity(n))).identity}async getIdentity(t){var i,s;await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const r=await this.createSessionFn(t);if(!((i=r.Credentials)!=null&&i.AccessKeyId)||!((s=r.Credentials)!=null&&s.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}}Er.REFRESH_WINDOW_MS=6e4;const Gl=e=>e[Fn]||(e[Fn]={}),Ae=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},Vl="X-Amz-Algorithm",Wl="X-Amz-Credential",La="X-Amz-Date",Kl="X-Amz-SignedHeaders",Xl="X-Amz-Expires",ja="X-Amz-Signature",Ha="X-Amz-Security-Token",za="authorization",qa=La.toLowerCase(),Zl="date",Ql=[za,qa,Zl],Yl=ja.toLowerCase(),Hn="x-amz-content-sha256",Jl=Ha.toLowerCase(),ef={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},tf=/^proxy-/,rf=/^sec-/,Or="AWS4-HMAC-SHA256",nf="AWS4-HMAC-SHA256-PAYLOAD",sf="UNSIGNED-PAYLOAD",of=50,Ga="aws4_request",af=60*60*24*7,Kt={},Pr=[],Nr=(e,t,r)=>`${e}/${t}/${r}/${Ga}`,cf=async(e,t,r,n,i)=>{const s=await pi(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${i}:${he(s)}:${t.sessionToken}`;if(o in Kt)return Kt[o];for(Pr.push(o);Pr.length>of;)delete Kt[Pr.shift()];let a=`AWS4${t.secretAccessKey}`;for(const u of[r,n,i,Ga])a=await pi(e,a,u);return Kt[o]=a},pi=(e,t,r)=>{const n=new e(t);return n.update(kt(r)),n.digest()},gi=({headers:e},t,r)=>{const n={};for(const i of Object.keys(e).sort()){if(e[i]==null)continue;const s=i.toLowerCase();(s in ef||t!=null&&t.has(s)||tf.test(s)||rf.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[i].trim().replace(/\s+/g," "))}return n},uf=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e).sort()){if(n.toLowerCase()===Yl)continue;t.push(n);const i=e[n];typeof i=="string"?r[n]=`${je(n)}=${je(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((s,o)=>s.concat([`${je(n)}=${je(o)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")},lf=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",Ir=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===Hn)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||lf(t)){const n=new r;return n.update(kt(t)),he(await n.digest())}return sf};class ff{format(t){const r=[];for(const s of Object.keys(t)){const o=et(s);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[s]))}const n=new Uint8Array(r.reduce((s,o)=>s+o.byteLength,0));let i=0;for(const s of r)n.set(s,i),i+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":const s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(s.buffer);return o.set(t.value,3),o;case"string":const a=et(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(hf.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!df.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(Na(t.value.replace(/\-/g,"")),1),h}}}var yi;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(yi||(yi={}));const df=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let hf=class Va{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&mi(r),new Va(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&mi(t),parseInt(he(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function mi(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const pf=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Wa=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?gf(t):void 0}),gf=e=>Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),yf=(e,t={})=>{var i;const{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():Wa(e);for(const s of Object.keys(r)){const o=s.toLowerCase();o.slice(0,6)==="x-amz-"&&!((i=t.unhoistableHeaders)!=null&&i.has(o))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}},bi=e=>{e=typeof e.clone=="function"?e.clone():Wa(e);for(const t of Object.keys(e.headers))Ql.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},mf=e=>bf(e).toISOString().replace(/\.\d{3}Z$/,"Z"),bf=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class zn{constructor({applyChecksum:t,credentials:r,region:n,service:i,sha256:s,uriEscapePath:o=!0}){this.headerFormatter=new ff,this.service=i,this.sha256=s,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Ae(n),this.credentialProvider=Ae(r)}async presign(t,r={}){const{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:s,unhoistableHeaders:o,signableHeaders:a,signingRegion:u,signingService:c}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);const h=u??await this.regionProvider(),{longDate:d,shortDate:g}=Xt(n);if(i>af)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=Nr(g,h,c??this.service),v=yf(bi(t),{unhoistableHeaders:o});l.sessionToken&&(v.query[Ha]=l.sessionToken),v.query[Vl]=Or,v.query[Wl]=`${l.accessKeyId}/${y}`,v.query[La]=d,v.query[Xl]=i.toString(10);const R=gi(v,s,a);return v.query[Kl]=wi(R),v.query[ja]=await this.getSignature(d,y,this.getSigningKey(l,h,g,c),this.createCanonicalRequest(v,R,await Ir(t,this.sha256))),v}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:s,signingService:o}){const a=s??await this.regionProvider(),{shortDate:u,longDate:c}=Xt(n),l=Nr(u,a,o??this.service),h=await Ir({headers:{},body:r},this.sha256),d=new this.sha256;d.update(t);const g=he(await d.digest()),y=[nf,c,l,i,g,h].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const o=n??await this.regionProvider(),{shortDate:a}=Xt(r),u=new this.sha256(await this.getSigningKey(s,o,a,i));return u.update(kt(t)),he(await u.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:s,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const u=s??await this.regionProvider(),c=bi(t),{longDate:l,shortDate:h}=Xt(r),d=Nr(h,u,o??this.service);c.headers[qa]=l,a.sessionToken&&(c.headers[Jl]=a.sessionToken);const g=await Ir(c,this.sha256);!pf(Hn,c.headers)&&this.applyChecksum&&(c.headers[Hn]=g);const y=gi(c,i,n),v=await this.getSignature(l,d,this.getSigningKey(a,u,h,o),this.createCanonicalRequest(c,y,g));return c.headers[za]=`${Or} Credential=${a.accessKeyId}/${d}, SignedHeaders=${wi(y)}, Signature=${v}`,c}createCanonicalRequest(t,r,n){const i=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${uf(t)}
${i.map(s=>`${s}:${r[s]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(t,r,n){const i=new this.sha256;i.update(kt(n));const s=await i.digest();return`${Or}
${t}
${r}
${he(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));const n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return je(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,i){const s=await this.createStringToSign(t,r,i),o=new this.sha256(await n);return o.update(kt(s)),he(await o.digest())}getSigningKey(t,r,n,i){return cf(this.sha256,t,n,r,i||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const Xt=e=>{const t=mf(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},wi=e=>Object.keys(e).sort().join(";");var _i;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(_i||(_i={}));const wf="Directory",_f="S3Express",Sf="sigv4-s3express",qn="X-Amz-S3session-Token",Gn=qn.toLowerCase();class vf extends zn{async signWithCredentials(t,r,n){const i=Si(r);t.headers[Gn]=r.sessionToken;const s=this;return vi(s,i),s.signRequest(t,n??{})}async presignWithCredentials(t,r,n){const i=Si(r);return delete t.headers[Gn],t.headers[qn]=r.sessionToken,t.query=t.query??{},t.query[qn]=r.sessionToken,vi(this,i),this.presign(t,n)}}function Si(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function vi(e,t){const r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,i=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=i}const Ef=e=>(t,r)=>async n=>{var i,s,o,a,u;if(r.endpointV2){const c=r.endpointV2,l=((o=(s=(i=c.properties)==null?void 0:i.authSchemes)==null?void 0:s[0])==null?void 0:o.name)===Sf;if((((a=c.properties)==null?void 0:a.backend)===_f||((u=c.properties)==null?void 0:u.bucketType)===wf)&&(r.isS3ExpressBucket=!0),l){const d=n.input.Bucket;if(d){const g=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:d});r.s3ExpressIdentity=g,Ce.isInstance(n.request)&&g.sessionToken&&(n.request.headers[Gn]=g.sessionToken)}}}return t(n)},xf={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Af=e=>({applyToStack:t=>{t.add(Ef(e),xf)}}),Cf=(e,{session:t})=>{const[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new Er(async i=>r().send(new n({Bucket:i,SessionMode:"ReadWrite"}))),bucketEndpoint:e.bucketEndpoint??!1}},Rf=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function Tf(e){return(t,r)=>async n=>{var i,s,o,a;if(e.bucketEndpoint){const u=r.endpointV2;if(u){const c=n.input.Bucket;if(typeof c=="string")try{const l=new URL(c);u.url=l}catch(l){const h=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${c} could not be parsed as URL.`;throw((s=(i=r.logger)==null?void 0:i.constructor)==null?void 0:s.name)==="NoOpLogger"?console.warn(h):(a=(o=r.logger)==null?void 0:o.warn)==null||a.call(o,h),l}}}return t(n)}}const Of={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Pf({bucketEndpoint:e}){return t=>async r=>{const{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!Rf(n)&&n.indexOf("/")>=0){const i=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw i.name="InvalidBucketName",i}return t({...r})}}const Nf={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},If=e=>({applyToStack:t=>{t.add(Pf(e),Nf),t.addRelativeTo(Tf(e),Of)}}),Ka=(e,t,r)=>{let n,i,s,o=!1;const a=async()=>{i||(i=e());try{n=await i,s=!0,o=!1}finally{i=void 0}return n};return t===void 0?async u=>((!s||u!=null&&u.forceRefresh)&&(n=await a()),n):async u=>((!s||u!=null&&u.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))},Bf=3e5,kf=e=>{const t=e.credentials?Mf(e.credentials):e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e})),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:i}=e;let s;return e.signer?s=Ae(e.signer):e.regionInfoProvider?s=()=>Ae(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,a])=>{const{signingRegion:u,signingService:c}=o;e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||c||e.serviceId;const l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:r},h=e.signerConstructor||zn;return new h(l)}):s=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ae(e.region)(),properties:{}},o);const a=(o==null?void 0:o.name)==="sigv4a",u=o.signingRegion,c=o.signingName;let l;a?l=e.signingRegion||u:(e.signingRegion=e.signingRegion||u,l=e.signingRegion),e.signingName=e.signingName||c||e.serviceId;const h={...e,credentials:t,region:l,service:e.signingName,sha256:i,uriEscapePath:r},d=e.signerConstructor||zn;return new d(h)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}},Mf=e=>typeof e=="function"?Ka(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Bf,t=>t.expiration!==void 0):Ae(e),Xa=e=>new Date(Date.now()+e),$f=(e,t)=>Math.abs(Xa(t).getTime()-e)>=3e5,Ei=(e,t)=>{const r=Date.parse(e);return $f(r,t)?r-Date.now():t},Ff=e=>(t,r)=>async function(n){var y,v,R,N,M,j,ne;if(!Ce.isInstance(n.request))return t(n);let i,s;const o=(R=(v=(y=r.endpointV2)==null?void 0:y.properties)==null?void 0:v.authSchemes)==null?void 0:R[0],a=(j=(M=(N=r.endpointV2)==null?void 0:N.properties)==null?void 0:M.authSchemes)==null?void 0:j[1];if((o==null?void 0:o.name)==="sigv4a"&&a){s=await e.signer(i=o);const Q=s;(()=>{var rt;if(typeof(Q==null?void 0:Q.getSigv4aSigner)=="function"){if(((rt=Q==null?void 0:Q.signerOptions)==null?void 0:rt.runtime)!=="node")return!1;try{return Q.getSigv4aSigner(),!0}catch{}}return!1})()||(s=await e.signer(i=a))}else s=await e.signer(i=o);let c;const l=(i==null?void 0:i.name)==="sigv4a"?(ne=i==null?void 0:i.signingRegionSet)==null?void 0:ne.join(","):void 0,h={signingDate:Xa(e.systemClockOffset),signingRegion:l||r.signing_region,signingService:r.signing_service};if(r.s3ExpressIdentity){if(c=await s.signWithCredentials(n.request,r.s3ExpressIdentity,h),c.headers["X-Amz-Security-Token"]||c.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.")}else c=await s.sign(n.request,h);const d=await t({...n,request:c}).catch(Q=>{const Ie=Q.ServerTime??xi(Q.$response);throw Ie&&(e.systemClockOffset=Ei(Ie,e.systemClockOffset)),Q}),g=xi(d.response);return g&&(e.systemClockOffset=Ei(g,e.systemClockOffset)),d},xi=e=>{var t,r;return hr.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},Uf={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Df=e=>({applyToStack:t=>{t.addRelativeTo(Ff(e),Uf)}});function Lf(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const jf=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Za=e=>jf.test(e)||e.startsWith("[")&&e.endsWith("]"),Hf=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),As=(e,t=!1)=>{if(!t)return Hf.test(e);const r=e.split(".");for(const n of r)if(!As(n))return!1;return!0},gr={},Ut="endpoints";function ze(e){return typeof e!="object"||e==null?e:"ref"in e?`$${ze(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(ze).join(", ")})`:JSON.stringify(e,null,2)}class ye extends Error{constructor(t){super(t),this.name="EndpointError"}}const zf=(e,t)=>e===t,qf=e=>{const t=e.split("."),r=[];for(const n of t){const i=n.indexOf("[");if(i!==-1){if(n.indexOf("]")!==n.length-1)throw new ye(`Path: '${e}' does not end with ']'`);const s=n.slice(i+1,-1);if(Number.isNaN(parseInt(s)))throw new ye(`Invalid array index: '${s}' in path: '${e}'`);i!==0&&r.push(n.slice(0,i)),r.push(s)}else r.push(n)}return r},Qa=(e,t)=>qf(t).reduce((r,n)=>{if(typeof r!="object")throw new ye(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),Gf=e=>e!=null,Vf=e=>!e,Br={[Ft.HTTP]:80,[Ft.HTTPS]:443},Wf=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:d,port:g,protocol:y="",path:v="",query:R={}}=e,N=new URL(`${y}//${d}${g?`:${g}`:""}${v}`);return N.search=Object.entries(R).map(([M,j])=>`${M}=${j}`).join("&"),N}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const r=t.href,{host:n,hostname:i,pathname:s,protocol:o,search:a}=t;if(a)return null;const u=o.slice(0,-1);if(!Object.values(Ft).includes(u))return null;const c=Za(i),l=r.includes(`${n}:${Br[u]}`)||typeof e=="string"&&e.includes(`${n}:${Br[u]}`),h=`${n}${l?`:${Br[u]}`:""}`;return{scheme:u,authority:h,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:c}},Kf=(e,t)=>e===t,Xf=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),Zf=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Qf={booleanEquals:zf,getAttr:Qa,isSet:Gf,isValidHostLabel:As,not:Vf,parseURL:Wf,stringEquals:Kf,substring:Xf,uriEncode:Zf},Ya=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let i=0;for(;i<e.length;){const s=e.indexOf("{",i);if(s===-1){r.push(e.slice(i));break}r.push(e.slice(i,s));const o=e.indexOf("}",s);if(o===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(s+1,o)),i=o+2);const a=e.substring(s+1,o);if(a.includes("#")){const[u,c]=a.split("#");r.push(Qa(n[u],c))}else r.push(n[a]);i=o+1}return r.join("")},Yf=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],xr=(e,t,r)=>{if(typeof e=="string")return Ya(e,r);if(e.fn)return Ja(e,r);if(e.ref)return Yf(e,r);throw new ye(`'${t}': ${String(e)} is not a string, function or reference.`)},Ja=({fn:e,argv:t},r)=>{const n=t.map(s=>["boolean","number"].includes(typeof s)?s:xr(s,"arg",r)),i=e.split(".");return i[0]in gr&&i[1]!=null?gr[i[0]][i[1]](...n):Qf[e](...n)},Jf=({assign:e,...t},r)=>{var i,s;if(e&&e in r.referenceRecord)throw new ye(`'${e}' is already defined in Reference Record.`);const n=Ja(t,r);return(s=(i=r.logger)==null?void 0:i.debug)==null||s.call(i,Ut,`evaluateCondition: ${ze(t)} = ${ze(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},Cs=(e=[],t)=>{var n,i;const r={};for(const s of e){const{result:o,toAssign:a}=Jf(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};a&&(r[a.name]=a.value,(i=(n=t.logger)==null?void 0:n.debug)==null||i.call(n,Ut,`assign: ${a.name} := ${ze(a.value)}`))}return{result:!0,referenceRecord:r}},ed=(e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:i.map(s=>{const o=xr(s,"Header value entry",t);if(typeof o!="string")throw new ye(`Header '${n}' value '${o}' is not a string`);return o})}),{}),ec=(e,t)=>{if(Array.isArray(e))return e.map(r=>ec(r,t));switch(typeof e){case"string":return Ya(e,t);case"object":if(e===null)throw new ye(`Unexpected endpoint property: ${e}`);return tc(e,t);case"boolean":return e;default:throw new ye(`Unexpected endpoint property type: ${typeof e}`)}},tc=(e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:ec(i,t)}),{}),td=(e,t)=>{const r=xr(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ye(`Endpoint URL must be a string, got ${typeof r}`)},rd=(e,t)=>{var l,h;const{conditions:r,endpoint:n}=e,{result:i,referenceRecord:s}=Cs(r,t);if(!i)return;const o={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:u,headers:c}=n;return(h=(l=t.logger)==null?void 0:l.debug)==null||h.call(l,Ut,`Resolving endpoint from template: ${ze(n)}`),{...c!=null&&{headers:ed(c,o)},...u!=null&&{properties:tc(u,o)},url:td(a,o)}},nd=(e,t)=>{const{conditions:r,error:n}=e,{result:i,referenceRecord:s}=Cs(r,t);if(i)throw new ye(xr(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},sd=(e,t)=>{const{conditions:r,rules:n}=e,{result:i,referenceRecord:s}=Cs(r,t);if(i)return rc(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},rc=(e,t)=>{for(const r of e)if(r.type==="endpoint"){const n=rd(r,t);if(n)return n}else if(r.type==="error")nd(r,t);else if(r.type==="tree"){const n=sd(r,t);if(n)return n}else throw new ye(`Unknown endpoint rule: ${r}`);throw new ye("Rules evaluation failed")},id=(e,t)=>{var c,l,h,d,g;const{endpointParams:r,logger:n}=t,{parameters:i,rules:s}=e;(l=(c=t.logger)==null?void 0:c.debug)==null||l.call(c,`${Ut} Initial EndpointParams: ${ze(r)}`);const o=Object.entries(i).filter(([,y])=>y.default!=null).map(([y,v])=>[y,v.default]);if(o.length>0)for(const[y,v]of o)r[y]=r[y]??v;const a=Object.entries(i).filter(([,y])=>y.required).map(([y])=>y);for(const y of a)if(r[y]==null)throw new ye(`Missing required parameter: '${y}'`);const u=rc(s,{endpointParams:r,logger:n,referenceRecord:{}});if((h=t.endpointParams)!=null&&h.Endpoint)try{const y=new URL(t.endpointParams.Endpoint),{protocol:v,port:R}=y;u.url.protocol=v,u.url.port=R}catch{}return(g=(d=t.logger)==null?void 0:d.debug)==null||g.call(d,`${Ut} Resolved endpoint: ${ze(u)}`),u},nc=(e,t=!1)=>{if(t){for(const r of e.split("."))if(!nc(r))return!1;return!0}return!(!As(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Za(e))},od=e=>{const t=e.split(":");if(t.length<6)return null;const[r,n,i,s,o,...a]=t;return r!=="arn"||n===""||i===""||a[0]===""?null:{partition:n,service:i,region:s,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}},ad=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],cd={partitions:ad};let ud=cd;const ld=e=>{const{partitions:t}=ud;for(const n of t){const{regions:i,outputs:s}=n;for(const[o,a]of Object.entries(i))if(o===e)return{...s,...a}}for(const n of t){const{regionRegex:i,outputs:s}=n;if(new RegExp(i).test(e))return{...s}}const r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},sc={isVirtualHostableS3Bucket:nc,parseArn:od,partition:ld};gr.aws=sc;const Ai="user-agent",kr="x-amz-user-agent",Ci=" ",Mr="/",fd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,dd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Ri="-",hd=e=>(t,r)=>async n=>{var h,d;const{request:i}=n;if(!Ce.isInstance(i))return t(n);const{headers:s}=i,o=((h=r==null?void 0:r.userAgent)==null?void 0:h.map($r))||[],a=(await e.defaultUserAgentProvider()).map($r),u=((d=e==null?void 0:e.customUserAgent)==null?void 0:d.map($r))||[],c=[].concat([...a,...o,...u]).join(Ci),l=[...a.filter(g=>g.startsWith("aws-sdk-")),...u].join(Ci);return e.runtime!=="browser"?(l&&(s[kr]=s[kr]?`${s[Ai]} ${l}`:l),s[Ai]=c):s[kr]=c,t({...n,request:i})},$r=e=>{var o;const t=e[0].split(Mr).map(a=>a.replace(fd,Ri)).join(Mr),r=(o=e[1])==null?void 0:o.replace(dd,Ri),n=t.indexOf(Mr),i=t.substring(0,n);let s=t.substring(n+1);return i==="api"&&(s=s.toLowerCase()),[i,s,r].filter(a=>a&&a.length>0).reduce((a,u,c)=>{switch(c){case 0:return u;case 1:return`${a}/${u}`;default:return`${a}#${u}`}},"")},pd={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},gd=e=>({applyToStack:t=>{t.add(hd(e),pd)}}),yd=!1,md=!1,ic=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Ti=e=>ic(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,bd=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ti(t);const n=await t();return Ti(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return ic(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},wd=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),Oi="content-length";function _d(e){return t=>async r=>{const n=r.request;if(Ce.isInstance(n)){const{body:i,headers:s}=n;if(i&&Object.keys(s).map(o=>o.toLowerCase()).indexOf(Oi)===-1)try{const o=e(i);n.headers={...n.headers,[Oi]:String(o)}}catch{}}return t({...r,request:n})}}const Sd={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},vd=e=>({applyToStack:t=>{t.add(_d(e.bodyLengthChecker),Sd)}}),Ed=async e=>{const t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Td(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Rd(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},xd=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Ad=/(\d+\.){3}\d+/,Cd=/\.\./,Rd=e=>xd.test(e)&&!Ad.test(e)&&!Cd.test(e),Td=e=>{const[t,r,n,,,i]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,o=!!(s&&r&&n&&i);if(s&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},Od=(e,t,r)=>{const n=async()=>{const i=r[e]??r[t];return typeof i=="function"?i():i};return e==="credentialScope"||t==="CredentialScope"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return(i==null?void 0:i.credentialScope)??(i==null?void 0:i.CredentialScope)}:e==="endpoint"||t==="endpoint"?async()=>{const i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:s,hostname:o,port:a,path:u}=i;return`${s}//${o}${a?":"+a:""}${u}`}}return i}:n},Pd=async e=>{};function Nd(e){const t={};if(e=e.replace(/^\?/,""),e)for(const r of e.split("&")){let[n,i=null]=r.split("=");n=decodeURIComponent(n),i&&(i=decodeURIComponent(i)),n in t?Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i}return t}const yr=e=>{if(typeof e=="string")return yr(new URL(e));const{hostname:t,pathname:r,port:n,protocol:i,search:s}=e;let o;return s&&(o=Nd(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:i,path:r,query:o}},oc=e=>typeof e=="object"?"url"in e?yr(e.url):e:yr(e),Id=async(e,t,r,n)=>{if(!r.endpoint){const o=await Pd(r.serviceId||"");o&&(r.endpoint=()=>Promise.resolve(oc(o)))}const i=await Bd(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)},Bd=async(e,t,r)=>{var s;const n={},i=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(const[o,a]of Object.entries(i))switch(a.type){case"staticContextParams":n[o]=a.value;break;case"contextParams":n[o]=e[a.name];break;case"clientContextParams":case"builtInParams":n[o]=await Od(a.name,o,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Ed(n),n},kd=({config:e,instructions:t})=>(r,n)=>async i=>{var a,u,c;const s=await Id(i.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;const o=(u=n.authSchemes)==null?void 0:u[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const l=Gl(n),h=(c=l==null?void 0:l.selectedHttpAuthScheme)==null?void 0:c.httpAuthOption;h&&(h.signingProperties=Object.assign(h.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...i})},Md=(e,t)=>(r,n)=>async i=>{const{response:s}=await r(i);try{const o=await t(s,e);return{response:s,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:s}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+a,typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},$d=(e,t)=>(r,n)=>async i=>{var a;const s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");const o=await t(i.input,{...e,endpoint:s});return r({...i,request:o})},Fd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Rs={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ud(e,t,r){return{applyToStack:n=>{n.add(Md(e,r),Fd),n.add($d(e,t),Rs)}}}const ac={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Rs.name},Dd=(e,t)=>({applyToStack:r=>{r.addRelativeTo(kd({config:e,instructions:t}),ac)}}),Ld=e=>{const t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>oc(await Ae(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Ae(e.useDualstackEndpoint??!1),useFipsEndpoint:Ae(e.useFipsEndpoint??!1)}};var ot;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ot||(ot={}));const mr=3,jd=ot.STANDARD,Hd=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],zd=["TimeoutError","RequestTimeout","RequestTimeoutException"],qd=[500,502,503,504],Gd=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Vd=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},cc=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Hd.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},uc=e=>{var t;return Vd(e)||zd.includes(e.name)||Gd.includes((e==null?void 0:e.code)||"")||qd.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Wd=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!uc(e)}return!1};class Kd{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),cc(t)){const i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}const Vn=100,lc=20*1e3,Xd=500,Pi=500,Zd=5,Qd=10,Yd=1,Jd="amz-sdk-invocation-id",eh="amz-sdk-request",th=()=>{let e=Vn;return{computeNextBackoffDelay:n=>Math.floor(Math.min(lc,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},Ni=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(lc,e),getRetryCost:()=>r});class fc{constructor(t){this.maxAttempts=t,this.mode=ot.STANDARD,this.capacity=Pi,this.retryBackoffStrategy=th(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Ni({retryDelay:Vn,retryCount:0})}async refreshRetryTokenForRetry(t,r){const n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){const i=r.errorType;this.retryBackoffStrategy.setDelayBase(i==="THROTTLING"?Xd:Vn);const s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(i);return this.capacity-=a,Ni({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Pi,this.capacity+(t.getRetryCost()??Yd))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${mr}`),mr}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Qd:Zd}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class rh{constructor(t,r){this.maxAttemptsProvider=t,this.mode=ot.ADAPTIVE;const{rateLimiter:n}=r??{};this.rateLimiter=n??new Kd,this.standardRetryStrategy=new fc(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}let Zt;const nh=new Uint8Array(16);function sh(){if(!Zt&&(Zt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zt(nh)}const re=[];for(let e=0;e<256;++e)re.push((e+256).toString(16).slice(1));function ih(e,t=0){return re[e[t+0]]+re[e[t+1]]+re[e[t+2]]+re[e[t+3]]+"-"+re[e[t+4]]+re[e[t+5]]+"-"+re[e[t+6]]+re[e[t+7]]+"-"+re[e[t+8]]+re[e[t+9]]+"-"+re[e[t+10]]+re[e[t+11]]+re[e[t+12]]+re[e[t+13]]+re[e[t+14]]+re[e[t+15]]}const oh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ii={randomUUID:oh};function ah(e,t,r){if(Ii.randomUUID&&!e)return Ii.randomUUID();e=e||{};const n=e.random||(e.rng||sh)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ih(n)}const ch=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),uh=e=>{const{retryStrategy:t}=e,r=Ae(e.maxAttempts??mr);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Ae(e.retryMode)()===ot.ADAPTIVE?new rh(r):new fc(r))}},lh=e=>(e==null?void 0:e.body)instanceof ReadableStream,fh=e=>(t,r)=>async n=>{var o;let i=await e.retryStrategy();const s=await e.maxAttempts();if(dh(i)){i=i;let a=await i.acquireInitialRetryToken(r.partition_id),u=new Error,c=0,l=0;const{request:h}=n,d=Ce.isInstance(h);for(d&&(h.headers[Jd]=ah());;)try{d&&(h.headers[eh]=`attempt=${c+1}; max=${s}`);const{response:g,output:y}=await t(n);return i.recordSuccess(a),y.$metadata.attempts=c+1,y.$metadata.totalRetryDelay=l,{response:g,output:y}}catch(g){const y=hh(g);if(u=ch(g),d&&lh(h))throw(o=r.logger instanceof Ta?console:r.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),u;try{a=await i.refreshRetryTokenForRetry(a,y)}catch{throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=l,u}c=a.getRetryCount();const v=a.getRetryDelay();l+=v,await new Promise(R=>setTimeout(R,v))}}else return i=i,i!=null&&i.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",i.mode]]),i.retry(t,n)},dh=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",hh=e=>{const t={error:e,errorType:ph(e)},r=yh(e.$response);return r&&(t.retryAfterHint=r),t},ph=e=>cc(e)?"THROTTLING":uc(e)?"TRANSIENT":Wd(e)?"SERVER_ERROR":"CLIENT_ERROR",dc={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},gh=e=>({applyToStack:t=>{t.add(fh(e),dc)}}),yh=e=>{if(!hr.isInstance(e))return;const t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},mh=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),bh={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class _e extends xs{constructor(t){super(t),Object.setPrototypeOf(this,_e.prototype)}}class Ts extends _e{constructor(t){super({name:"NoSuchUpload",$fault:"client",...t}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,Ts.prototype)}}class Os extends _e{constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,Os.prototype)}}class Ps extends _e{constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,Ps.prototype)}}class Ns extends _e{constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,Ns.prototype)}}class Is extends _e{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,Is.prototype)}}var Bi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Bi||(Bi={}));var ki;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(ki||(ki={}));var Mi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Mi||(Mi={}));var $i;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})($i||($i={}));class Bs extends _e{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,Bs.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}}class ks extends _e{constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,ks.prototype)}}class Ms extends _e{constructor(t){super({name:"NotFound",$fault:"client",...t}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,Ms.prototype)}}const wh=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Qe},...e.SessionToken&&{SessionToken:Qe}}),_h=e=>({...e,...e.Credentials&&{Credentials:wh(e.Credentials)}});ac.name;Rs.name;dc.name;function $s(e,t){return new Sh(e,t)}class Sh{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:t,protocol:r="https",port:n,path:i}=await this.context.endpoint();this.path=i;for(const s of this.resolvePathStack)s(this.path);return new Ce({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,i){return this.resolvePathStack.push(s=>{this.path=Dl(s,this.input,t,r,n,i)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}const vh=(e,t)=>Ia(e,t).then(r=>t.utf8Encoder(r));var Fs={},Ar={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",i=new RegExp("^"+n+"$"),s=function(a,u){const c=[];let l=u.exec(a);for(;l;){const h=[];h.startIndex=u.lastIndex-l[0].length;const d=l.length;for(let g=0;g<d;g++)h.push(l[g]);c.push(h),l=u.exec(a)}return c},o=function(a){const u=i.exec(a);return!(u===null||typeof u>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,u,c){if(u){const l=Object.keys(u),h=l.length;for(let d=0;d<h;d++)c==="strict"?a[l[d]]=[u[l[d]]]:a[l[d]]=u[l[d]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.isName=o,e.getAllMatches=s,e.nameRegexp=n})(Ar);const Us=Ar,Eh={allowBooleanAttributes:!1,unpairedTags:[]};Fs.validate=function(e,t){t=Object.assign({},Eh,t);const r=[];let n=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Ui(e,s),s.err)return s}else if(e[s]==="<"){let o=s;if(s++,e[s]==="!"){s=Di(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let u="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)u+=e[s];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),s--),!Nh(u)){let h;return u.trim().length===0?h="Invalid space after '<'.":h="Tag '"+u+"' is an invalid name.",V("InvalidTag",h,de(e,s))}const c=Ch(e,s);if(c===!1)return V("InvalidAttr","Attributes for '"+u+"' have open quote.",de(e,s));let l=c.value;if(s=c.index,l[l.length-1]==="/"){const h=s-l.length;l=l.substring(0,l.length-1);const d=Li(l,t);if(d===!0)n=!0;else return V(d.err.code,d.err.msg,de(e,h+d.err.line))}else if(a)if(c.tagClosed){if(l.trim().length>0)return V("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",de(e,o));{const h=r.pop();if(u!==h.tagName){let d=de(e,h.tagStartPos);return V("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+u+"'.",de(e,o))}r.length==0&&(i=!0)}}else return V("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",de(e,s));else{const h=Li(l,t);if(h!==!0)return V(h.err.code,h.err.msg,de(e,s-l.length+h.err.line));if(i===!0)return V("InvalidXml","Multiple possible root nodes found.",de(e,s));t.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:o}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Di(e,s);continue}else if(e[s+1]==="?"){if(s=Ui(e,++s),s.err)return s}else break;else if(e[s]==="&"){const h=Oh(e,s);if(h==-1)return V("InvalidChar","char '&' is not expected.",de(e,s));s=h}else if(i===!0&&!Fi(e[s]))return V("InvalidXml","Extra text at the end",de(e,s));e[s]==="<"&&s--}}else{if(Fi(e[s]))continue;return V("InvalidChar","char '"+e[s]+"' is not expected.",de(e,s))}if(n){if(r.length==1)return V("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",de(e,r[0].tagStartPos));if(r.length>0)return V("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return V("InvalidXml","Start tag expected.",1);return!0};function Fi(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Ui(e,t){const r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const n=e.substr(r,t-r);if(t>5&&n==="xml")return V("InvalidXml","XML declaration allowed only at the start of the document.",de(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Di(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const xh='"',Ah="'";function Ch(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if(e[t]===xh||e[t]===Ah)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){i=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:i}}const Rh=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Li(e,t){const r=Us.getAllMatches(e,Rh),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return V("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",ft(r[i]));if(r[i][3]!==void 0&&r[i][4]===void 0)return V("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",ft(r[i]));if(r[i][3]===void 0&&!t.allowBooleanAttributes)return V("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",ft(r[i]));const s=r[i][2];if(!Ph(s))return V("InvalidAttr","Attribute '"+s+"' is an invalid name.",ft(r[i]));if(!n.hasOwnProperty(s))n[s]=1;else return V("InvalidAttr","Attribute '"+s+"' is repeated.",ft(r[i]))}return!0}function Th(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Oh(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Th(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function V(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Ph(e){return Us.isName(e)}function Nh(e){return Us.isName(e)}function de(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ft(e){return e.startIndex+e[1].length}var Ds={};const hc={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Ih=function(e){return Object.assign({},hc,e)};Ds.buildOptions=Ih;Ds.defaultOptions=hc;class Bh{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}var kh=Bh;const Mh=Ar;function $h(e,t){const r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,i=!1,s=!1,o="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(i&&Dh(e,t))t+=7,[entityName,val,t]=Fh(e,t+1),val.indexOf("&")===-1&&(r[zh(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&Lh(e,t))t+=8;else if(i&&jh(e,t))t+=8;else if(i&&Hh(e,t))t+=9;else if(Uh)s=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?i=!0:o+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Fh(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const n=e[t++];let i="";for(;t<e.length&&e[t]!==n;t++)i+=e[t];return[r,i,t]}function Uh(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Dh(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Lh(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function jh(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Hh(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function zh(e){if(Mh.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var qh=$h;const Gh=/^[-+]?0x[a-fA-F0-9]+$/,Vh=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Wh={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Kh(e,t={}){if(t=Object.assign({},Wh,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Gh.test(r))return Number.parseInt(r,16);{const n=Vh.exec(r);if(n){const i=n[1],s=n[2];let o=Xh(n[3]);const a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&i&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!i&&r[1]!==".")return e;{const u=Number(r),c=""+u;return c.search(/[eE]/)!==-1||a?t.eNotation?u:e:r.indexOf(".")!==-1?c==="0"&&o===""||c===o||i&&c==="-"+o?u:e:s?o===c||i+o===c?u:e:r===c||r===i+c?u:e}}else return e}}function Xh(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var Zh=Kh;const Ls=Ar,dt=kh,Qh=qh,Yh=Zh;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Ls.nameRegexp);let Jh=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=ep,this.parseXml=ip,this.parseTextData=tp,this.resolveNameSpace=rp,this.buildAttributesMap=sp,this.isItStopNode=up,this.replaceEntitiesValue=ap,this.readStopNodeData=fp,this.saveTextToParentTag=cp,this.addChild=op}};function ep(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function tp(e,t,r,n,i,s,o){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,r,i,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Kn(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Kn(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function rp(e){if(this.options.removeNSPrefix){const t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}const np=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function sp(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){const n=Ls.getAllMatches(e,np),i=n.length,s={};for(let o=0;o<i;o++){const a=this.resolveNameSpace(n[o][1]);let u=n[o][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);const l=this.options.attributeValueProcessor(a,u,t);l==null?s[c]=u:typeof l!=typeof u||l!==u?s[c]=l:s[c]=Kn(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[c]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=s,o}return s}}const ip=function(e){e=e.replace(/\r\n?/g,`
`);const t=new dt("!xml");let r=t,n="",i="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const a=Xe(e,">",s,"Closing Tag is not closed.");let u=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){const h=u.indexOf(":");h!==-1&&(u=u.substr(h+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(n=this.saveTextToParentTag(n,r,i));const c=i.substring(i.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let l=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(l=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=i.lastIndexOf("."),i=i.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Wn(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,i),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const u=new dt(a.tagName);u.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(u[":@"]=this.buildAttributesMap(a.tagExp,i,a.tagName)),this.addChild(r,u,i)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){const a=Xe(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const u=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,i),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}s=a}else if(e.substr(s+1,2)==="!D"){const a=Qh(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){const a=Xe(e,"]]>",s,"CDATA is not closed.")-2,u=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,i),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]);else{let c=this.parseTextData(u,r.tagname,i,!0,!1,!0);c==null&&(c=""),r.add(this.options.textNodeName,c)}s=a+2}else{let a=Wn(e,s,this.options.removeNSPrefix),u=a.tagName,c=a.tagExp,l=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,i,!1));const d=r;if(d&&this.options.unpairedTags.indexOf(d.tagname)!==-1&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),u!==t.tagname&&(i+=i?"."+u:u),this.isItStopNode(this.options.stopNodes,i,u)){let g="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)s=a.closeIndex;else{const v=this.readStopNodeData(e,u,h+1);if(!v)throw new Error(`Unexpected end of ${u}`);s=v.i,g=v.tagContent}const y=new dt(u);u!==c&&l&&(y[":@"]=this.buildAttributesMap(c,i,u)),g&&(g=this.parseTextData(g,u,i,!0,l,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),y.add(this.options.textNodeName,g),this.addChild(r,y,i)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),c=u):c=c.substr(0,c.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const g=new dt(u);u!==c&&l&&(g[":@"]=this.buildAttributesMap(c,i,u)),this.addChild(r,g,i),i=i.substr(0,i.lastIndexOf("."))}else{const g=new dt(u);this.tagsNodeStack.push(r),u!==c&&l&&(g[":@"]=this.buildAttributesMap(c,i,u)),this.addChild(r,g,i),r=g}n="",s=h}}else n+=e[s];return t.child};function op(e,t,r){const n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}const ap=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function cp(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function up(e,t,r){const n="*."+r;for(const i in e){const s=e[i];if(n===s||t===s)return!0}return!1}function lp(e,t,r=">"){let n,i="";for(let s=t;s<e.length;s++){let o=e[s];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(e[s+1]===r[1])return{data:i,index:s}}else return{data:i,index:s};else o==="	"&&(o=" ");i+=o}}function Xe(e,t,r,n){const i=e.indexOf(t,r);if(i===-1)throw new Error(n);return i+t.length-1}function Wn(e,t,r,n=">"){const i=lp(e,t+1,n);if(!i)return;let s=i.data;const o=i.index,a=s.search(/\s/);let u=s,c=!0;if(a!==-1&&(u=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){const l=u.indexOf(":");l!==-1&&(u=u.substr(l+1),c=u!==i.data.substr(l+1))}return{tagName:u,tagExp:s,closeIndex:o,attrExpPresent:c}}function fp(e,t,r){const n=r;let i=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){const s=Xe(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(i--,i===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Xe(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Xe(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Xe(e,"]]>",r,"StopNode is not closed.")-2;else{const s=Wn(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&i++,r=s.closeIndex)}}function Kn(e,t,r){if(t&&typeof e=="string"){const n=e.trim();return n==="true"?!0:n==="false"?!1:Yh(e,r)}else return Ls.isExist(e)?e:""}var dp=Jh,pc={};function hp(e,t){return gc(e,t)}function gc(e,t,r){let n;const i={};for(let s=0;s<e.length;s++){const o=e[s],a=pp(o);let u="";if(r===void 0?u=a:u=r+"."+a,a===t.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let c=gc(o[a],t,u);const l=yp(c,t);o[":@"]?gp(c,o[":@"],u,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(c)):t.isArray(a,u,l)?i[a]=[c]:i[a]=c}}}return typeof n=="string"?n.length>0&&(i[t.textNodeName]=n):n!==void 0&&(i[t.textNodeName]=n),i}function pp(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function gp(e,t,r,n){if(t){const i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){const a=i[o];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function yp(e,t){const{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}pc.prettify=hp;const{buildOptions:mp}=Ds,bp=dp,{prettify:wp}=pc,_p=Fs;let Sp=class{constructor(t){this.externalEntities={},this.options=mp(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const s=_p.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const n=new bp(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(t);return this.options.preserveOrder||i===void 0?i:wp(i,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};var vp=Sp;const Ep=`
`;function xp(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=Ep),yc(e,t,"",r)}function yc(e,t,r,n){let i="",s=!1;for(let o=0;o<e.length;o++){const a=e[o],u=Ap(a);let c="";if(r.length===0?c=u:c=`${r}.${u}`,u===t.textNodeName){let y=a[u];Cp(c,t)||(y=t.tagValueProcessor(u,y),y=mc(y,t)),s&&(i+=n),i+=y,s=!1;continue}else if(u===t.cdataPropName){s&&(i+=n),i+=`<![CDATA[${a[u][0][t.textNodeName]}]]>`,s=!1;continue}else if(u===t.commentPropName){i+=n+`<!--${a[u][0][t.textNodeName]}-->`,s=!0;continue}else if(u[0]==="?"){const y=ji(a[":@"],t),v=u==="?xml"?"":n;let R=a[u][0][t.textNodeName];R=R.length!==0?" "+R:"",i+=v+`<${u}${R}${y}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);const h=ji(a[":@"],t),d=n+`<${u}${h}`,g=yc(a[u],t,c,l);t.unpairedTags.indexOf(u)!==-1?t.suppressUnpairedNode?i+=d+">":i+=d+"/>":(!g||g.length===0)&&t.suppressEmptyNode?i+=d+"/>":g&&g.endsWith(">")?i+=d+`>${g}${n}</${u}>`:(i+=d+">",g&&n!==""&&(g.includes("/>")||g.includes("</"))?i+=n+t.indentBy+g+n:i+=g,i+=`</${u}>`),s=!0}return i}function Ap(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function ji(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let i=t.attributeValueProcessor(n,e[n]);i=mc(i,t),i===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${i}"`}return r}function Cp(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function mc(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const n=t.entities[r];e=e.replace(n.regex,n.val)}return e}var Rp=xp;const Tp=Rp,Op={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ge(e){this.options=Object.assign({},Op,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ip),this.processTextOrObjNode=Pp,this.options.format?(this.indentate=Np,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ge.prototype.build=function(e){return this.options.preserveOrder?Tp(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Ge.prototype.j2x=function(e,t){let r="",n="";for(let i in e)if(!(typeof e[i]>"u"))if(e[i]===null)i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextValNode(e[i],i,"",t);else if(typeof e[i]!="object"){const s=this.isAttribute(i);if(s)r+=this.buildAttrPairStr(s,""+e[i]);else if(i===this.options.textNodeName){let o=this.options.tagValueProcessor(i,""+e[i]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){const s=e[i].length;let o="";for(let a=0;a<s;a++){const u=e[i][a];typeof u>"u"||(u===null?i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar:typeof u=="object"?this.options.oneListGroup?o+=this.j2x(u,t+1).val:o+=this.processTextOrObjNode(u,i,t):o+=this.buildTextValNode(u,i,"",t))}this.options.oneListGroup&&(o=this.buildObjectNode(o,i,"",t)),n+=o}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){const s=Object.keys(e[i]),o=s.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(s[a],""+e[i][s[a]])}else n+=this.processTextOrObjNode(e[i],i,t);return{attrStr:r,val:n}};Ge.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Pp(e,t,r){const n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Ge.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",i=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+i:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+i}};Ge.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Ge.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+i+"</"+t+this.tagEndChar}};Ge.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Np(e){return this.options.indentBy.repeat(e)}function Ip(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}var Bp=Ge;const kp=Fs,Mp=vp,$p=Bp;var Fp={XMLParser:Mp,XMLValidator:kp,XMLBuilder:$p};const js=(e,t)=>vh(e,t).then(r=>{if(r.length){const n=new Fp.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(u,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i;try{i=n.parse(r,!0)}catch(u){throw u&&typeof u=="object"&&Object.defineProperty(u,"$responseBodyText",{value:r}),u}const s="#text",o=Object.keys(i)[0],a=i[o];return a[s]&&(a[o]=a[s],delete a[s]),Da(a)}return{}}),Up=async(e,t)=>{const r=await js(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Dp=(e,t)=>{var r;if(((r=t==null?void 0:t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};class Hs extends _e{constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,Hs.prototype)}}var Hi;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(Hi||(Hi={}));const cw=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Qe},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Qe}}),uw=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Qe},...e.SSEKMSKeyId&&{SSEKMSKeyId:Qe},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Qe}}),Lp=async(e,t)=>{const r=$s(e,t),n=Z({},Le,{[qg]:e[_g]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const i=Z({[jg]:[,""]});return r.m("GET").h(n).q(i).b(void 0),r.build()},lw=async(e,t)=>{const r=$s(e,t),n=Z({},Le,{[$c]:e[xc],[kc]:e[vc],[Jg]:[()=>Le(e[Vi]),()=>(e[Vi]||[]).map(o=>o).join(", ")]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const i=Z({[Ug]:[,"2"],[Bg]:[,e[nr]],[Mg]:[,e[sr]],[Dg]:[()=>e.MaxKeys!==void 0,()=>e[ar].toString()],[Lg]:[,e[Ye]],[Ig]:[,e[rr]],[Fg]:[()=>e.FetchOwner!==void 0,()=>e[hg].toString()],[Hg]:[,e[cr]]});return r.m("GET").h(n).q(i).b(void 0),r.build()},fw=async(e,t)=>{const r=$s(e,t),n=Z({},Le,{[Ng]:e[dg]||"application/octet-stream",[zg]:e[og],[Ag]:e[ag],[Cg]:e[cg],[Rg]:e[ug],[Tg]:e[lg],[Og]:[()=>Le(e[zi]),()=>e[zi].toString()],[Pg]:e[fg],[ty]:e[It],[Pc]:e[bc],[Nc]:e[wc],[Ic]:e[_c],[Bc]:e[Sc],[kg]:[()=>Le(e[qi]),()=>wl(e[qi]).toString()],[Vg]:e[pg],[Wg]:e[gg],[Kg]:e[yg],[Xg]:e[mg],[Fc]:e[Ac],[ey]:e[Je],[iy]:e[xg],[Lc]:e[Cc],[ry]:e[Sg],[jc]:e[Rc],[Uc]:e[Oc],[Dc]:e[Tc],[Zn]:[()=>Le(e[Xn]),()=>e[Xn].toString()],[$c]:e[xc],[ny]:e[vg],[Qg]:e[wg],[Yg]:[()=>Le(e[Gi]),()=>(e[Gi].toISOString().split(".")[0]+"Z").toString()],[Zg]:e[bg],[kc]:e[vc],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,u)=>(a[`x-amz-meta-${u.toLowerCase()}`]=e.Metadata[u],a),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const i=Z({[oy]:[,"PutObject"]});let s,o;return e.Body!==void 0&&(o=e.Body,s=o),r.m("PUT").h(n).q(i).b(s),r.build()},jp=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zs(e,t);const r=Z({$metadata:Se(e)}),n=Vt(ka(await js(e.body,t)),"body");return n[Dr]!=null&&(r[Dr]=ig(n[Dr])),r},dw=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zs(e,t);const r=Z({$metadata:Se(e),[Ec]:[,e.headers[Mc]]}),n=Vt(ka(await js(e.body,t)),"body");return n.CommonPrefixes===""?r[Qt]=[]:n[Qt]!=null&&(r[Qt]=eg(Ln(n[Qt]))),n.Contents===""?r[Yt]=[]:n[Yt]!=null&&(r[Yt]=rg(Ln(n[Yt]))),n[rr]!=null&&(r[rr]=X(n[rr])),n[nr]!=null&&(r[nr]=X(n[nr])),n[sr]!=null&&(r[sr]=X(n[sr])),n[zr]!=null&&(r[zr]=Ss(n[zr])),n[Gr]!=null&&(r[Gr]=di(n[Gr])),n[ar]!=null&&(r[ar]=di(n[ar])),n[Wr]!=null&&(r[Wr]=X(n[Wr])),n[Kr]!=null&&(r[Kr]=X(n[Kr])),n[Ye]!=null&&(r[Ye]=X(n[Ye])),n[cr]!=null&&(r[cr]=X(n[cr])),r},hw=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zs(e,t);const r=Z({$metadata:Se(e),[or]:[,e.headers[Gg]],[ir]:[,e.headers[$g]],[bc]:[,e.headers[Pc]],[wc]:[,e.headers[Nc]],[_c]:[,e.headers[Ic]],[Sc]:[,e.headers[Bc]],[Ac]:[,e.headers[Fc]],[Eg]:[,e.headers[sy]],[Cc]:[,e.headers[Lc]],[Rc]:[,e.headers[jc]],[Oc]:[,e.headers[Uc]],[Tc]:[,e.headers[Dc]],[Xn]:[()=>e.headers[Zn]!==void 0,()=>Ss(e.headers[Zn])],[Ec]:[,e.headers[Mc]]});return await Ia(e.body,t),r},zs=async(e,t)=>{const r={...e,body:await Up(e.body,t)},n=Dp(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await Kp(r);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await Qp(r);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await zp(r);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await qp(r);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Vp(r);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Gp(r);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Wp(r);case"NotFound":case"com.amazonaws.s3#NotFound":throw await Xp(r);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await Zp(r);default:const i=r.body;return Hp({output:e,parsedBody:i,errorCode:n})}},Hp=Tl(_e),zp=async(e,t)=>{const r=Z({});e.body;const n=new Ps({$metadata:Se(e),...r});return Pe(n,e.body)},qp=async(e,t)=>{const r=Z({});e.body;const n=new Ns({$metadata:Se(e),...r});return Pe(n,e.body)},Gp=async(e,t)=>{const r=Z({}),n=e.body;n[Ur]!=null&&(r[Ur]=X(n[Ur])),n[Je]!=null&&(r[Je]=X(n[Je]));const i=new Bs({$metadata:Se(e),...r});return Pe(i,e.body)},Vp=async(e,t)=>{const r=Z({});e.body;const n=new Is({$metadata:Se(e),...r});return Pe(n,e.body)},Wp=async(e,t)=>{const r=Z({});e.body;const n=new ks({$metadata:Se(e),...r});return Pe(n,e.body)},Kp=async(e,t)=>{const r=Z({});e.body;const n=new Ts({$metadata:Se(e),...r});return Pe(n,e.body)},Xp=async(e,t)=>{const r=Z({});e.body;const n=new Ms({$metadata:Se(e),...r});return Pe(n,e.body)},Zp=async(e,t)=>{const r=Z({});e.body;const n=new Hs({$metadata:Se(e),...r});return Pe(n,e.body)},Qp=async(e,t)=>{const r=Z({});e.body;const n=new Os({$metadata:Se(e),...r});return Pe(n,e.body)},Yp=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>X(r)),Jp=(e,t)=>{const r={};return e[Ye]!=null&&(r[Ye]=X(e[Ye])),r},eg=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>Jp(r)),tg=(e,t)=>{const r={};return e[qr]!=null&&(r[qr]=X(e[qr])),e[Vr]!=null&&(r[Vr]=Vt(Es(e[Vr]))),e[ir]!=null&&(r[ir]=X(e[ir])),e.ChecksumAlgorithm===""?r[It]=[]:e[It]!=null&&(r[It]=Yp(Ln(e[It]))),e[en]!=null&&(r[en]=gl(e[en])),e[Je]!=null&&(r[Je]=X(e[Je])),e[Xr]!=null&&(r[Xr]=ng(e[Xr])),e[Qr]!=null&&(r[Qr]=sg(e[Qr])),r},rg=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>tg(r)),ng=(e,t)=>{const r={};return e[Lr]!=null&&(r[Lr]=X(e[Lr])),e[jr]!=null&&(r[jr]=X(e[jr])),r},sg=(e,t)=>{const r={};return e[Hr]!=null&&(r[Hr]=Ss(e[Hr])),e[Zr]!=null&&(r[Zr]=Vt(Es(e[Zr]))),r},ig=(e,t)=>{const r={};return e[Fr]!=null&&(r[Fr]=X(e[Fr])),e[Yr]!=null&&(r[Yr]=X(e[Yr])),e[Jr]!=null&&(r[Jr]=X(e[Jr])),e[or]!=null&&(r[or]=Vt(Es(e[or]))),r},Se=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Le=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),og="ACL",Fr="AccessKeyId",Ur="AccessTier",Xn="BucketKeyEnabled",Dr="Credentials",It="ChecksumAlgorithm",ag="CacheControl",bc="ChecksumCRC32",wc="ChecksumCRC32C",cg="ContentDisposition",ug="ContentEncoding",lg="ContentLanguage",zi="ContentLength",fg="ContentMD5",Qt="CommonPrefixes",_c="ChecksumSHA1",Sc="ChecksumSHA256",dg="ContentType",rr="ContinuationToken",Yt="Contents",nr="Delimiter",Lr="DisplayName",qi="Expires",vc="ExpectedBucketOwner",sr="EncodingType",ir="ETag",or="Expiration",hg="FetchOwner",pg="GrantFullControl",gg="GrantRead",yg="GrantReadACP",mg="GrantWriteACP",jr="ID",Hr="IsRestoreInProgress",zr="IsTruncated",qr="Key",Gr="KeyCount",Vr="LastModified",ar="MaxKeys",Wr="Name",Kr="NextContinuationToken",Xr="Owner",bg="ObjectLockLegalHoldStatus",wg="ObjectLockMode",Gi="ObjectLockRetainUntilDate",Vi="OptionalObjectAttributes",Ye="Prefix",Ec="RequestCharged",Zr="RestoreExpiryDate",xc="RequestPayer",Qr="RestoreStatus",cr="StartAfter",Yr="SecretAccessKey",Je="StorageClass",_g="SessionMode",Ac="ServerSideEncryption",Cc="SSECustomerAlgorithm",Sg="SSECustomerKey",Rc="SSECustomerKeyMD5",Tc="SSEKMSEncryptionContext",Oc="SSEKMSKeyId",Jr="SessionToken",en="Size",vg="Tagging",Eg="VersionId",xg="WebsiteRedirectLocation",Ag="cache-control",Cg="content-disposition",Rg="content-encoding",Tg="content-language",Og="content-length",Pg="content-md5",Ng="content-type",Ig="continuation-token",Bg="delimiter",kg="expires",Mg="encoding-type",$g="etag",Fg="fetch-owner",Ug="list-type",Dg="max-keys",Lg="prefix",jg="session",Hg="start-after",zg="x-amz-acl",Pc="x-amz-checksum-crc32",Nc="x-amz-checksum-crc32c",Ic="x-amz-checksum-sha1",Bc="x-amz-checksum-sha256",qg="x-amz-create-session-mode",Gg="x-amz-expiration",kc="x-amz-expected-bucket-owner",Vg="x-amz-grant-full-control",Wg="x-amz-grant-read",Kg="x-amz-grant-read-acp",Xg="x-amz-grant-write-acp",Zg="x-amz-object-lock-legal-hold",Qg="x-amz-object-lock-mode",Yg="x-amz-object-lock-retain-until-date",Jg="x-amz-optional-object-attributes",Mc="x-amz-request-charged",$c="x-amz-request-payer",ey="x-amz-storage-class",ty="x-amz-sdk-checksum-algorithm",Fc="x-amz-server-side-encryption",Uc="x-amz-server-side-encryption-aws-kms-key-id",Zn="x-amz-server-side-encryption-bucket-key-enabled",Dc="x-amz-server-side-encryption-context",Lc="x-amz-server-side-encryption-customer-algorithm",ry="x-amz-server-side-encryption-customer-key",jc="x-amz-server-side-encryption-customer-key-md5",ny="x-amz-tagging",sy="x-amz-version-id",iy="x-amz-website-redirect-location",oy="x-id";class ay extends Ba.classBuilder().ep({...bh,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,i){return[Ud(n,this.serialize,this.deserialize),Dd(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(void 0,_h).ser(Lp).de(jp).build(){}const cy="3.554.0",uy={version:cy};var Hc={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qn=function(e,t){return Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Qn(e,t)};function ly(e,t){Qn(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yn=function(){return Yn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Yn.apply(this,arguments)};function fy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function dy(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function hy(e,t){return function(r,n){t(r,n,e)}}function py(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function gy(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function yy(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function my(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function by(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Jn(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function wy(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zc(arguments[t]));return e}function _y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Dt(e){return this instanceof Dt?(this.v=e,this):new Dt(e)}function Sy(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,v){s.push([d,g,y,v])>1||a(d,g)})})}function a(d,g){try{u(n[d](g))}catch(y){h(s[0][3],y)}}function u(d){d.value instanceof Dt?Promise.resolve(d.value.v).then(c,l):h(s[0][2],d)}function c(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function vy(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:Dt(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function Ey(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Jn=="function"?Jn(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function xy(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Ay(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Cy(e){return e&&e.__esModule?e:{default:e}}function Ry(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Ty(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Oy=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Yn},__asyncDelegator:vy,__asyncGenerator:Sy,__asyncValues:Ey,__await:Dt,__awaiter:gy,__classPrivateFieldGet:Ry,__classPrivateFieldSet:Ty,__createBinding:my,__decorate:dy,__exportStar:by,__extends:ly,__generator:yy,__importDefault:Cy,__importStar:Ay,__makeTemplateObject:xy,__metadata:py,__param:hy,__read:zc,__rest:fy,__spread:wy,__spreadArrays:_y,__values:Jn},Symbol.toStringTag,{value:"Module"})),Py=qe(Oy);var ht={},pt={},gt={},Wi;function qc(){if(Wi)return gt;Wi=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return gt.isEmptyData=e,gt}var tn={},Ki;function Gc(){return Ki||(Ki=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_1=e.SHA_1_HMAC_ALGO=e.SHA_1_HASH=void 0,e.SHA_1_HASH={name:"SHA-1"},e.SHA_1_HMAC_ALGO={name:"HMAC",hash:e.SHA_1_HASH},e.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])}(tn)),tn}const Ny=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const i=e.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(r+1<e.length&&(i&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const s=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(t)},Iy=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const s=e[++r];t+=String.fromCharCode((i&31)<<6|s&63)}else if(240<=i&&i<365){const o="%"+[i,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(o)}else t+=String.fromCharCode((i&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function By(e){return new TextEncoder().encode(e)}function ky(e){return new TextDecoder("utf-8").decode(e)}const My=e=>typeof TextEncoder=="function"?By(e):Ny(e),$y=e=>typeof TextDecoder=="function"?ky(e):Iy(e),Fy=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:My,toUtf8:$y},Symbol.toStringTag,{value:"Module"})),Cr=qe(Fy),Uy={};function Dy(){return typeof window<"u"?window:typeof self<"u"?self:Uy}const Ly=Object.freeze(Object.defineProperty({__proto__:null,locateWindow:Dy},Symbol.toStringTag,{value:"Module"})),ut=qe(Ly);var Xi;function Vc(){if(Xi)return pt;Xi=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.Sha1=void 0;var e=qc(),t=Gc(),r=Cr,n=ut,i=function(){function a(u){this.secret=u,this.reset()}return a.prototype.update=function(u){var c=this;(0,e.isEmptyData)(u)||(this.operation=this.operation.then(function(l){return l.onerror=function(){c.operation=Promise.reject(new Error("Error encountered updating hash"))},l.process(o(u)),l}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(u){return new Promise(function(c,l){u.onerror=function(){l(new Error("Error encountered finalizing hash"))},u.oncomplete=function(){u.result&&c(new Uint8Array(u.result)),l(new Error("Error encountered finalizing hash"))},u.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=s(this.secret).then(function(u){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_1_HMAC_ALGO,u)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-1"))},a}();pt.Sha1=i;function s(a){return new Promise(function(u,c){var l=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_1_HMAC_ALGO,!1,["sign"]);l.oncomplete=function(){l.result&&u(l.result),c(new Error("ImportKey completed without importing key."))},l.onerror=function(){c(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return pt}var yt={},Zi;function Wc(){if(Zi)return yt;Zi=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.Sha1=void 0;var e=Cr,t=qc(),r=Gc(),n=ut,i=function(){function o(a){this.toHash=new Uint8Array(0),a!==void 0&&(this.key=new Promise(function(u,c){(0,n.locateWindow)().crypto.subtle.importKey("raw",s(a),r.SHA_1_HMAC_ALGO,!1,["sign"]).then(u,c)}),this.key.catch(function(){}))}return o.prototype.update=function(a){if(!(0,t.isEmptyData)(a)){var u=s(a),c=new Uint8Array(this.toHash.byteLength+u.byteLength);c.set(this.toHash,0),c.set(u,this.toHash.byteLength),this.toHash=c}},o.prototype.digest=function(){var a=this;return this.key?this.key.then(function(u){return(0,n.locateWindow)().crypto.subtle.sign(r.SHA_1_HMAC_ALGO,u,a.toHash).then(function(c){return new Uint8Array(c)})}):(0,t.isEmptyData)(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,n.locateWindow)().crypto.subtle.digest(r.SHA_1_HASH,a.toHash)}).then(function(u){return Promise.resolve(new Uint8Array(u))})},o.prototype.reset=function(){this.toHash=new Uint8Array(0)},o}();yt.Sha1=i;function s(o){return typeof o=="string"?(0,e.fromUtf8)(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}return yt}var rn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var es=function(e,t){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},es(e,t)};function jy(e,t){es(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ts=function(){return ts=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ts.apply(this,arguments)};function Hy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function zy(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function qy(e,t){return function(r,n){t(r,n,e)}}function Gy(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Vy(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function Wy(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ky(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Xy(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function rs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Zy(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kc(arguments[t]));return e}function Qy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Lt(e){return this instanceof Lt?(this.v=e,this):new Lt(e)}function Yy(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,v){s.push([d,g,y,v])>1||a(d,g)})})}function a(d,g){try{u(n[d](g))}catch(y){h(s[0][3],y)}}function u(d){d.value instanceof Lt?Promise.resolve(d.value.v).then(c,l):h(s[0][2],d)}function c(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Jy(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:Lt(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function em(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof rs=="function"?rs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function tm(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function rm(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function nm(e){return e&&e.__esModule?e:{default:e}}function sm(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function im(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const om=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ts},__asyncDelegator:Jy,__asyncGenerator:Yy,__asyncValues:em,__await:Lt,__awaiter:Vy,__classPrivateFieldGet:sm,__classPrivateFieldSet:im,__createBinding:Ky,__decorate:zy,__exportStar:Xy,__extends:jy,__generator:Wy,__importDefault:nm,__importStar:rm,__makeTemplateObject:tm,__metadata:Gy,__param:qy,__read:Kc,__rest:Hy,__spread:Zy,__spreadArrays:Qy,__values:rs},Symbol.toStringTag,{value:"Module"})),Xc=qe(om);var ve={},Qi;function am(){if(Qi)return ve;Qi=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.supportsZeroByteGCM=ve.supportsSubtleCrypto=ve.supportsSecureRandom=ve.supportsWebCrypto=void 0;var e=Xc,t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(o){if(n(o)&&typeof o.crypto.subtle=="object"){var a=o.crypto.subtle;return i(a)}return!1}ve.supportsWebCrypto=r;function n(o){if(typeof o=="object"&&typeof o.crypto=="object"){var a=o.crypto.getRandomValues;return typeof a=="function"}return!1}ve.supportsSecureRandom=n;function i(o){return o&&t.every(function(a){return typeof o[a]=="function"})}ve.supportsSubtleCrypto=i;function s(o){return e.__awaiter(this,void 0,void 0,function(){var a,u;return e.__generator(this,function(c){switch(c.label){case 0:if(!i(o))return[2,!1];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,o.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return a=c.sent(),[4,o.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},a,new Uint8Array(0))];case 3:return u=c.sent(),[2,u.byteLength===16];case 4:return c.sent(),[2,!1];case 5:return[2]}})})}return ve.supportsZeroByteGCM=s,ve}var Yi;function Zc(){return Yi||(Yi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Xc;t.__exportStar(am(),e)}(rn)),rn}var nn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ns=function(e,t){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ns(e,t)};function cm(e,t){ns(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ss=function(){return ss=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ss.apply(this,arguments)};function um(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function lm(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function fm(e,t){return function(r,n){t(r,n,e)}}function dm(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function hm(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function pm(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function gm(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function ym(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function is(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function mm(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Qc(arguments[t]));return e}function bm(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function jt(e){return this instanceof jt?(this.v=e,this):new jt(e)}function wm(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,v){s.push([d,g,y,v])>1||a(d,g)})})}function a(d,g){try{u(n[d](g))}catch(y){h(s[0][3],y)}}function u(d){d.value instanceof jt?Promise.resolve(d.value.v).then(c,l):h(s[0][2],d)}function c(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _m(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:jt(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function Sm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof is=="function"?is(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function vm(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Em(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function xm(e){return e&&e.__esModule?e:{default:e}}function Am(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Cm(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Rm=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ss},__asyncDelegator:_m,__asyncGenerator:wm,__asyncValues:Sm,__await:jt,__awaiter:hm,__classPrivateFieldGet:Am,__classPrivateFieldSet:Cm,__createBinding:gm,__decorate:lm,__exportStar:ym,__extends:cm,__generator:pm,__importDefault:xm,__importStar:Em,__makeTemplateObject:vm,__metadata:dm,__param:fm,__read:Qc,__rest:um,__spread:mm,__spreadArrays:bm,__values:is},Symbol.toStringTag,{value:"Module"})),Tm=qe(Rm);var sn={},Ji;function Om(){return Ji||(Ji=1,Object.defineProperty(sn,"__esModule",{value:!0})),sn}var on={},eo;function Pm(){return eo||(eo=1,Object.defineProperty(on,"__esModule",{value:!0})),on}var an={},to;function Nm(){return to||(to=1,Object.defineProperty(an,"__esModule",{value:!0})),an}var cn={},ro;function Im(){return ro||(ro=1,Object.defineProperty(cn,"__esModule",{value:!0})),cn}var mt={},no;function Bm(){if(no)return mt;no=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function r(n){if(t(n)&&n.msCrypto.subtle!==void 0){var i=n.msCrypto,s=i.getRandomValues,o=i.subtle;return e.map(function(a){return o[a]}).concat(s).every(function(a){return typeof a=="function"})}return!1}return mt.isMsWindow=r,mt}var so;function Yc(){return so||(so=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Tm;t.__exportStar(Om(),e),t.__exportStar(Pm(),e),t.__exportStar(Nm(),e),t.__exportStar(Im(),e),t.__exportStar(Bm(),e)}(nn)),nn}var un={},bt={},io;function km(){if(io)return bt;io=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.convertToBuffer=void 0;var e=Cr,t=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:e.fromUtf8;function r(n){return n instanceof Uint8Array?n:typeof n=="string"?t(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return bt.convertToBuffer=r,bt}var wt={},oo;function Mm(){if(oo)return wt;oo=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return wt.isEmptyData=e,wt}var _t={},ao;function $m(){if(ao)return _t;ao=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return _t.numToUint8=e,_t}var St={},co;function Fm(){if(co)return St;co=1,Object.defineProperty(St,"__esModule",{value:!0}),St.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),n=0;n<t.length;)r[n]=t[n],n+=1;return r}return Uint32Array.from(t)}return St.uint32ArrayFrom=e,St}var uo;function lt(){return uo||(uo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=km();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=Mm();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var n=$m();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var i=Fm();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})}(un)),un}var lo;function Um(){if(lo)return ht;lo=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.Sha1=void 0;var e=Vc(),t=Wc(),r=Zc(),n=Yc(),i=ut,s=lt(),o=function(){function a(u){if((0,r.supportsWebCrypto)((0,i.locateWindow)()))this.hash=new t.Sha1(u);else if((0,n.isMsWindow)((0,i.locateWindow)()))this.hash=new e.Sha1(u);else throw new Error("SHA1 not supported")}return a.prototype.update=function(u,c){this.hash.update((0,s.convertToBuffer)(u))},a.prototype.digest=function(){return this.hash.digest()},a.prototype.reset=function(){this.hash.reset()},a}();return ht.Sha1=o,ht}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha1=e.Ie11Sha1=void 0;var t=Py;t.__exportStar(Um(),e);var r=Vc();Object.defineProperty(e,"Ie11Sha1",{enumerable:!0,get:function(){return r.Sha1}});var n=Wc();Object.defineProperty(e,"WebCryptoSha1",{enumerable:!0,get:function(){return n.Sha1}})})(Hc);var Jc={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var os=function(e,t){return os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},os(e,t)};function Dm(e,t){os(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var as=function(){return as=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},as.apply(this,arguments)};function Lm(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function jm(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function Hm(e,t){return function(r,n){t(r,n,e)}}function zm(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function qm(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function Gm(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vm(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Wm(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function cs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Km(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(eu(arguments[t]));return e}function Xm(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Ht(e){return this instanceof Ht?(this.v=e,this):new Ht(e)}function Zm(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,v){s.push([d,g,y,v])>1||a(d,g)})})}function a(d,g){try{u(n[d](g))}catch(y){h(s[0][3],y)}}function u(d){d.value instanceof Ht?Promise.resolve(d.value.v).then(c,l):h(s[0][2],d)}function c(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Qm(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:Ht(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function Ym(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof cs=="function"?cs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function Jm(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function e0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function t0(e){return e&&e.__esModule?e:{default:e}}function r0(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function n0(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const s0=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return as},__asyncDelegator:Qm,__asyncGenerator:Zm,__asyncValues:Ym,__await:Ht,__awaiter:qm,__classPrivateFieldGet:r0,__classPrivateFieldSet:n0,__createBinding:Vm,__decorate:jm,__exportStar:Wm,__extends:Dm,__generator:Gm,__importDefault:t0,__importStar:e0,__makeTemplateObject:Jm,__metadata:zm,__param:Hm,__read:eu,__rest:Lm,__spread:Km,__spreadArrays:Xm,__values:cs},Symbol.toStringTag,{value:"Module"})),i0=qe(s0);var vt={},Et={},xt={},fo;function o0(){if(fo)return xt;fo=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return xt.isEmptyData=e,xt}var ln={},ho;function tu(){return ho||(ho=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(ln)),ln}var po;function ru(){if(po)return Et;po=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.Sha256=void 0;var e=o0(),t=tu(),r=Cr,n=ut,i=function(){function a(u){this.secret=u,this.reset()}return a.prototype.update=function(u){var c=this;(0,e.isEmptyData)(u)||(this.operation=this.operation.then(function(l){return l.onerror=function(){c.operation=Promise.reject(new Error("Error encountered updating hash"))},l.process(o(u)),l}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(u){return new Promise(function(c,l){u.onerror=function(){l(new Error("Error encountered finalizing hash"))},u.oncomplete=function(){u.result&&c(new Uint8Array(u.result)),l(new Error("Error encountered finalizing hash"))},u.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=s(this.secret).then(function(u){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_256_HMAC_ALGO,u)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-256"))},a}();Et.Sha256=i;function s(a){return new Promise(function(u,c){var l=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_256_HMAC_ALGO,!1,["sign"]);l.oncomplete=function(){l.result&&u(l.result),c(new Error("ImportKey completed without importing key."))},l.onerror=function(){c(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return Et}var At={},go;function nu(){if(go)return At;go=1,Object.defineProperty(At,"__esModule",{value:!0}),At.Sha256=void 0;var e=lt(),t=tu(),r=ut,n=function(){function i(s){this.toHash=new Uint8Array(0),this.secret=s,this.reset()}return i.prototype.update=function(s){if(!(0,e.isEmptyData)(s)){var o=(0,e.convertToBuffer)(s),a=new Uint8Array(this.toHash.byteLength+o.byteLength);a.set(this.toHash,0),a.set(o,this.toHash.byteLength),this.toHash=a}},i.prototype.digest=function(){var s=this;return this.key?this.key.then(function(o){return(0,r.locateWindow)().crypto.subtle.sign(t.SHA_256_HMAC_ALGO,o,s.toHash).then(function(a){return new Uint8Array(a)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(t.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(t.SHA_256_HASH,s.toHash)}).then(function(o){return Promise.resolve(new Uint8Array(o))})},i.prototype.reset=function(){var s=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(o,a){(0,r.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(s.secret),t.SHA_256_HMAC_ALGO,!1,["sign"]).then(o,a)}),this.key.catch(function(){}))},i}();return At.Sha256=n,At}var fn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var us=function(e,t){return us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},us(e,t)};function a0(e,t){us(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ls=function(){return ls=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ls.apply(this,arguments)};function c0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function u0(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function l0(e,t){return function(r,n){t(r,n,e)}}function f0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function d0(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function h0(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function p0(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function g0(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function fs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function su(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function y0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(su(arguments[t]));return e}function m0(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function zt(e){return this instanceof zt?(this.v=e,this):new zt(e)}function b0(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,v){s.push([d,g,y,v])>1||a(d,g)})})}function a(d,g){try{u(n[d](g))}catch(y){h(s[0][3],y)}}function u(d){d.value instanceof zt?Promise.resolve(d.value.v).then(c,l):h(s[0][2],d)}function c(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w0(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:zt(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function _0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof fs=="function"?fs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function S0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function v0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function E0(e){return e&&e.__esModule?e:{default:e}}function x0(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A0(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const C0=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ls},__asyncDelegator:w0,__asyncGenerator:b0,__asyncValues:_0,__await:zt,__awaiter:d0,__classPrivateFieldGet:x0,__classPrivateFieldSet:A0,__createBinding:p0,__decorate:u0,__exportStar:g0,__extends:a0,__generator:h0,__importDefault:E0,__importStar:v0,__makeTemplateObject:S0,__metadata:f0,__param:l0,__read:su,__rest:c0,__spread:y0,__spreadArrays:m0,__values:fs},Symbol.toStringTag,{value:"Module"})),iu=qe(C0);var Ct={},ge={},yo;function ou(){return yo||(yo=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.MAX_HASHABLE_LENGTH=ge.INIT=ge.KEY=ge.DIGEST_LENGTH=ge.BLOCK_SIZE=void 0,ge.BLOCK_SIZE=64,ge.DIGEST_LENGTH=32,ge.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ge.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ge.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ge}var Rt={},mo;function R0(){if(mo)return Rt;mo=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.RawSha256=void 0;var e=ou(),t=function(){function r(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var i=0,s=n.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=n[i++],s--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,i=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(i.setUint8(this.bufferLength++,128),s%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var o=this.bufferLength;o<e.BLOCK_SIZE;o++)i.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<e.BLOCK_SIZE-8;o++)i.setUint8(o,0);i.setUint32(e.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),i.setUint32(e.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(e.DIGEST_LENGTH),o=0;o<8;o++)a[o*4]=this.state[o]>>>24&255,a[o*4+1]=this.state[o]>>>16&255,a[o*4+2]=this.state[o]>>>8&255,a[o*4+3]=this.state[o]>>>0&255;return a},r.prototype.hashBuffer=function(){for(var n=this,i=n.buffer,s=n.state,o=s[0],a=s[1],u=s[2],c=s[3],l=s[4],h=s[5],d=s[6],g=s[7],y=0;y<e.BLOCK_SIZE;y++){if(y<16)this.temp[y]=(i[y*4]&255)<<24|(i[y*4+1]&255)<<16|(i[y*4+2]&255)<<8|i[y*4+3]&255;else{var v=this.temp[y-2],R=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10;v=this.temp[y-15];var N=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;this.temp[y]=(R+this.temp[y-7]|0)+(N+this.temp[y-16]|0)}var M=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&h^~l&d)|0)+(g+(e.KEY[y]+this.temp[y]|0)|0)|0,j=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&u^a&u)|0;g=d,d=h,h=l,l=c+M|0,c=u,u=a,a=o,o=M+j|0}s[0]+=o,s[1]+=a,s[2]+=u,s[3]+=c,s[4]+=l,s[5]+=h,s[6]+=d,s[7]+=g},r}();return Rt.RawSha256=t,Rt}var bo;function T0(){if(bo)return Ct;bo=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.Sha256=void 0;var e=iu,t=ou(),r=R0(),n=lt(),i=function(){function o(a){this.secret=a,this.hash=new r.RawSha256,this.reset()}return o.prototype.update=function(a){if(!((0,n.isEmptyData)(a)||this.error))try{this.hash.update((0,n.convertToBuffer)(a))}catch(u){this.error=u}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.digestSync()]})})},o.prototype.reset=function(){if(this.hash=new r.RawSha256,this.secret){this.outer=new r.RawSha256;var a=s(this.secret),u=new Uint8Array(t.BLOCK_SIZE);u.set(a);for(var c=0;c<t.BLOCK_SIZE;c++)a[c]^=54,u[c]^=92;this.hash.update(a),this.outer.update(u);for(var c=0;c<a.byteLength;c++)a[c]=0}},o}();Ct.Sha256=i;function s(o){var a=(0,n.convertToBuffer)(o);if(a.byteLength>t.BLOCK_SIZE){var u=new r.RawSha256;u.update(a),a=u.digest()}var c=new Uint8Array(t.BLOCK_SIZE);return c.set(a),c}return Ct}var wo;function O0(){return wo||(wo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=iu;t.__exportStar(T0(),e)}(fn)),fn}var _o;function P0(){if(_o)return vt;_o=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.Sha256=void 0;var e=ru(),t=nu(),r=O0(),n=Zc(),i=Yc(),s=ut,o=lt(),a=function(){function u(c){(0,n.supportsWebCrypto)((0,s.locateWindow)())?this.hash=new t.Sha256(c):(0,i.isMsWindow)((0,s.locateWindow)())?this.hash=new e.Sha256(c):this.hash=new r.Sha256(c)}return u.prototype.update=function(c,l){this.hash.update((0,o.convertToBuffer)(c))},u.prototype.digest=function(){return this.hash.digest()},u.prototype.reset=function(){this.hash.reset()},u}();return vt.Sha256=a,vt}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0;var t=i0;t.__exportStar(P0(),e);var r=ru();Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var n=nu();Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(Jc);const N0={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},au={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},H={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ue={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ue={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class w{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const i=w.getVersionPrecision(t),s=w.getVersionPrecision(r);let o=Math.max(i,s),a=0;const u=w.map([t,r],c=>{const l=o-w.getVersionPrecision(c),h=c+new Array(l+1).join(".0");return w.map(h.split("."),d=>new Array(20-d.length).join("0")+d).reverse()});for(n&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}}static map(t,r){const n=[];let i;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(i=0;i<t.length;i+=1)n.push(r(t[i]));return n}static find(t,r){let n,i;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,i=t.length;n<i;n+=1){const s=t[n];if(r(s,n))return s}}static assign(t,...r){const n=t;let i,s;if(Object.assign)return Object.assign(t,...r);for(i=0,s=r.length;i<s;i+=1){const o=r[i];typeof o=="object"&&o!==null&&Object.keys(o).forEach(u=>{n[u]=o[u]})}return t}static getBrowserAlias(t){return N0[t]}static getBrowserTypeByAlias(t){return au[t]||""}}const $=/version\/(\d+(\.?_?\d+)+)/i,I0=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=w.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=w.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=w.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=w.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=w.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=w.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=w.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=w.getFirstMatch($,e)||w.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=w.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=w.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=w.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=w.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=w.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=w.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=w.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=w.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=w.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=w.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=w.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=w.getFirstMatch($,e)||w.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=w.getFirstMatch($,e)||w.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=w.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=w.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=w.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=w.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=w.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=w.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=w.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=w.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=w.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=w.getFirstMatch($,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,i=e.search("\\(")!==-1?r:t;return{name:w.getFirstMatch(i,e),version:w.getSecondMatch(i,e)}}}],B0=[{test:[/Roku\/DVP/],describe(e){const t=w.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:ue.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=w.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:ue.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=w.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=w.getWindowsVersionName(t);return{name:ue.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:ue.iOS},r=w.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=w.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=w.getMacOSVersionName(t),n={name:ue.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=w.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:ue.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=w.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=w.getAndroidVersionName(t),n={name:ue.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=w.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:ue.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=w.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||w.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||w.getFirstMatch(/\bbb(\d+)/i,e);return{name:ue.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=w.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:ue.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=w.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:ue.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:ue.Linux}}},{test:[/CrOS/],describe(){return{name:ue.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=w.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:ue.PlayStation4,version:t}}}],k0=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=w.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:H.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:H.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:H.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:H.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:H.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:H.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:H.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=w.getFirstMatch(/(ipod|iphone)/i,e);return{type:H.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:H.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:H.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:H.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:H.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:H.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:H.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:H.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:H.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:H.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:H.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:H.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:H.tv}}}],M0=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Ue.Blink};const r=w.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ue.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:Ue.Trident},r=w.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Ue.Presto},r=w.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:Ue.Gecko},r=w.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ue.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Ue.WebKit},r=w.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class So{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=w.find(I0,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=w.find(B0,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=w.find(k0,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=w.find(M0,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return w.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const i={};let s=0;if(Object.keys(t).forEach(a=>{const u=t[a];typeof u=="string"?(i[a]=u,s+=1):typeof u=="object"&&(r[a]=u,n+=1)}),n>0){const a=Object.keys(r),u=w.find(a,l=>this.isOS(l));if(u){const l=this.satisfies(r[u]);if(l!==void 0)return l}const c=w.find(a,l=>this.isPlatform(l));if(c){const l=this.satisfies(r[c]);if(l!==void 0)return l}}if(s>0){const a=Object.keys(i),u=w.find(a,c=>this.isBrowser(c,!0));if(u!==void 0)return this.compareVersion(i[u])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let i=t.toLowerCase();const s=w.getBrowserTypeByAlias(i);return r&&s&&(i=s.toLowerCase()),i===n}compareVersion(t){let r=[0],n=t,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(i=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(i=!0,n=t.substr(1)),r.indexOf(w.compareVersions(s,n,i))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class cu{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new So(t,r)}static parse(t){return new So(t).getResult()}static get BROWSER_MAP(){return au}static get ENGINE_MAP(){return Ue}static get OS_MAP(){return ue}static get PLATFORMS_MAP(){return H}}const $0=({serviceId:e,clientVersion:t})=>async()=>{var i,s,o,a,u;const r=typeof window<"u"&&((i=window==null?void 0:window.navigator)!=null&&i.userAgent)?cu.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${((s=r==null?void 0:r.os)==null?void 0:s.name)||"other"}`,(o=r==null?void 0:r.os)==null?void 0:o.version],["lang/js"],["md/browser",`${((a=r==null?void 0:r.browser)==null?void 0:a.name)??"unknown"}_${((u=r==null?void 0:r.browser)==null?void 0:u.version)??"unknown"}`]];return e&&n.push([`api/${e}`,t]),n};var dn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ds=function(e,t){return ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ds(e,t)};function F0(e,t){ds(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var hs=function(){return hs=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},hs.apply(this,arguments)};function U0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function D0(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function L0(e,t){return function(r,n){t(r,n,e)}}function j0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function H0(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function z0(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function q0(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function G0(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function ps(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function uu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function V0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(uu(arguments[t]));return e}function W0(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function qt(e){return this instanceof qt?(this.v=e,this):new qt(e)}function K0(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(g){return new Promise(function(y,v){s.push([d,g,y,v])>1||a(d,g)})})}function a(d,g){try{u(n[d](g))}catch(y){h(s[0][3],y)}}function u(d){d.value instanceof qt?Promise.resolve(d.value.v).then(c,l):h(s[0][2],d)}function c(d){a("next",d)}function l(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function X0(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:qt(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function Z0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ps=="function"?ps(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function Q0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Y0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function J0(e){return e&&e.__esModule?e:{default:e}}function eb(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function tb(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const rb=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return hs},__asyncDelegator:X0,__asyncGenerator:K0,__asyncValues:Z0,__await:qt,__awaiter:H0,__classPrivateFieldGet:eb,__classPrivateFieldSet:tb,__createBinding:q0,__decorate:D0,__exportStar:G0,__extends:F0,__generator:z0,__importDefault:J0,__importStar:Y0,__makeTemplateObject:Q0,__metadata:j0,__param:L0,__read:uu,__rest:U0,__spread:V0,__spreadArrays:W0,__values:ps},Symbol.toStringTag,{value:"Module"})),lu=qe(rb);var Tt={},vo;function nb(){if(vo)return Tt;vo=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.AwsCrc32=void 0;var e=lu,t=lt(),r=fu(),n=function(){function i(){this.crc32=new r.Crc32}return i.prototype.update=function(s){(0,t.isEmptyData)(s)||this.crc32.update((0,t.convertToBuffer)(s))},i.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(s){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},i.prototype.reset=function(){this.crc32=new r.Crc32},i}();return Tt.AwsCrc32=n,Tt}var Eo;function fu(){return Eo||(Eo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=lu,r=lt();function n(u){return new i().update(u).digest()}e.crc32=n;var i=function(){function u(){this.checksum=4294967295}return u.prototype.update=function(c){var l,h;try{for(var d=t.__values(c),g=d.next();!g.done;g=d.next()){var y=g.value;this.checksum=this.checksum>>>8^o[(this.checksum^y)&255]}}catch(v){l={error:v}}finally{try{g&&!g.done&&(h=d.return)&&h.call(d)}finally{if(l)throw l.error}}return this},u.prototype.digest=function(){return(this.checksum^4294967295)>>>0},u}();e.Crc32=i;var s=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,r.uint32ArrayFrom)(s),a=nb();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})}(dn)),dn}var du=fu();class $t{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&xo(r),new $t(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&xo(t),parseInt(he(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function xo(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class sb{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){const r=[];for(const s of Object.keys(t)){const o=this.fromUtf8(s);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[s]))}const n=new Uint8Array(r.reduce((s,o)=>s+o.byteLength,0));let i=0;for(const s of r)n.set(s,i),i+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":const s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(s.buffer);return o.set(t.value,3),o;case"string":const a=this.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set($t.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!hb.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(Na(t.value.replace(/\-/g,"")),1),h}}parse(t){const r={};let n=0;for(;n<t.byteLength;){const i=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,i));switch(n+=i,t.getUint8(n++)){case 0:r[s]={type:Co,value:!0};break;case 1:r[s]={type:Co,value:!1};break;case 2:r[s]={type:ib,value:t.getInt8(n++)};break;case 3:r[s]={type:ob,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:ab,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:cb,value:new $t(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:const o=t.getUint16(n,!1);n+=2,r[s]={type:ub,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:const a=t.getUint16(n,!1);n+=2,r[s]={type:lb,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:fb,value:new Date(new $t(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const u=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:db,value:`${he(u.subarray(0,4))}-${he(u.subarray(4,6))}-${he(u.subarray(6,8))}-${he(u.subarray(8,10))}-${he(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var Ao;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Ao||(Ao={}));const Co="boolean",ib="byte",ob="short",ab="integer",cb="long",ub="binary",lb="string",fb="timestamp",db="uuid",hb=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,hu=4,De=hu*2,Ke=4,pb=De+Ke*2;function gb({byteLength:e,byteOffset:t,buffer:r}){if(e<pb)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,t,e),i=n.getUint32(0,!1);if(e!==i)throw new Error("Reported message length does not match received message length");const s=n.getUint32(hu,!1),o=n.getUint32(De,!1),a=n.getUint32(e-Ke,!1),u=new du.Crc32().update(new Uint8Array(r,t,De));if(o!==u.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,t+De,e-(De+Ke))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+De+Ke,s),body:new Uint8Array(r,t+De+Ke+s,i-s-(De+Ke+Ke))}}class yb{constructor(t,r){this.headerMarshaller=new sb(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){const t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){const t=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){const n=this.headerMarshaller.format(t),i=n.byteLength+r.byteLength+16,s=new Uint8Array(i),o=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new du.Crc32;return o.setUint32(0,i,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),o.setUint32(i-4,a.update(s.subarray(8,i-4)).digest(),!1),s}decode(t){const{headers:r,body:n}=gb(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}}class mb{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.decoder.decode(t)}}class bb{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class wb{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream){const r=await this.options.deserializer(t);r!==void 0&&(yield r)}}}class _b{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.serializer(t)}}function Sb(e){let t=0,r=0,n=null,i=null;const s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=e[Symbol.asyncIterator]();for(;;){const{value:u,done:c}=await a.next();if(c){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}const l=u.length;let h=0;for(;h<l;){if(!n){const g=l-h;i||(i=new Uint8Array(4));const y=Math.min(4-r,g);if(i.set(u.slice(h,h+y),r),r+=y,h+=y,r<4)break;s(new DataView(i.buffer).getUint32(0,!1)),i=null}const d=Math.min(t-r,l-h);n.set(u.slice(h,h+d),r),r+=d,h+=d,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function vb(e,t){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const i=new Error(r.headers[":error-message"].value||"UnknownError");throw i.name=r.headers[":error-code"].value,i}else if(n==="exception"){const i=r.headers[":exception-type"].value,s={[i]:r},o=await e(s);if(o.$unknown){const a=new Error(t(r.body));throw a.name=i,a}throw o[i]}else if(n==="event"){const i={[r.headers[":event-type"].value]:r},s=await e(i);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let Eb=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new yb(t,r),this.utfEncoder=t}deserialize(t,r){const n=Sb(t);return new wb({messageStream:new mb({inputStream:n,decoder:this.eventStreamCodec}),deserializer:vb(r,this.utfEncoder)})}serialize(t,r){return new bb({messageStream:new _b({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const xb=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),Ab=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:i}=await t.next();if(n)return r.close();r.enqueue(i)}})};class Cb{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Eb({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){const n=Rb(t)?xb(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){const n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?Ab(n):n}}const Rb=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,Tb=e=>new Cb(e);function Ob(e,t,r=1024*1024){return new Promise((n,i)=>{const s=new FileReader;s.addEventListener("error",i),s.addEventListener("abort",i);const o=e.size;let a=0;function u(){if(a>=o){n();return}s.readAsArrayBuffer(e.slice(a,Math.min(o,a+r)))}s.addEventListener("load",c=>{const l=c.target.result;t(new Uint8Array(l)),a+=l.byteLength,u()}),u()})}const Pb=async function(t,r){const n=new t;return await Ob(r,i=>{n.update(i)}),n.digest()},Nb=e=>()=>Promise.reject(e),Me=64,Ib=16,Bb=[1732584193,4023233417,2562383102,271733878];class kb{constructor(){this.reset()}update(t){if(Mb(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=$b(t);let n=0,{byteLength:i}=r;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),i--,this.bufferLength===Me&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:i}=this,s=i*8;if(r.setUint8(this.bufferLength++,128),n%Me>=Me-8){for(let o=this.bufferLength;o<Me;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Me-8;o++)r.setUint8(o,0);r.setUint32(Me-8,s>>>0,!0),r.setUint32(Me-4,Math.floor(s/4294967296),!0),this.hashBuffer(),this.finished=!0}const t=new DataView(new ArrayBuffer(Ib));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){const{buffer:t,state:r}=this;let n=r[0],i=r[1],s=r[2],o=r[3];n=se(n,i,s,o,t.getUint32(0,!0),7,3614090360),o=se(o,n,i,s,t.getUint32(4,!0),12,3905402710),s=se(s,o,n,i,t.getUint32(8,!0),17,606105819),i=se(i,s,o,n,t.getUint32(12,!0),22,3250441966),n=se(n,i,s,o,t.getUint32(16,!0),7,4118548399),o=se(o,n,i,s,t.getUint32(20,!0),12,1200080426),s=se(s,o,n,i,t.getUint32(24,!0),17,2821735955),i=se(i,s,o,n,t.getUint32(28,!0),22,4249261313),n=se(n,i,s,o,t.getUint32(32,!0),7,1770035416),o=se(o,n,i,s,t.getUint32(36,!0),12,2336552879),s=se(s,o,n,i,t.getUint32(40,!0),17,4294925233),i=se(i,s,o,n,t.getUint32(44,!0),22,2304563134),n=se(n,i,s,o,t.getUint32(48,!0),7,1804603682),o=se(o,n,i,s,t.getUint32(52,!0),12,4254626195),s=se(s,o,n,i,t.getUint32(56,!0),17,2792965006),i=se(i,s,o,n,t.getUint32(60,!0),22,1236535329),n=ie(n,i,s,o,t.getUint32(4,!0),5,4129170786),o=ie(o,n,i,s,t.getUint32(24,!0),9,3225465664),s=ie(s,o,n,i,t.getUint32(44,!0),14,643717713),i=ie(i,s,o,n,t.getUint32(0,!0),20,3921069994),n=ie(n,i,s,o,t.getUint32(20,!0),5,3593408605),o=ie(o,n,i,s,t.getUint32(40,!0),9,38016083),s=ie(s,o,n,i,t.getUint32(60,!0),14,3634488961),i=ie(i,s,o,n,t.getUint32(16,!0),20,3889429448),n=ie(n,i,s,o,t.getUint32(36,!0),5,568446438),o=ie(o,n,i,s,t.getUint32(56,!0),9,3275163606),s=ie(s,o,n,i,t.getUint32(12,!0),14,4107603335),i=ie(i,s,o,n,t.getUint32(32,!0),20,1163531501),n=ie(n,i,s,o,t.getUint32(52,!0),5,2850285829),o=ie(o,n,i,s,t.getUint32(8,!0),9,4243563512),s=ie(s,o,n,i,t.getUint32(28,!0),14,1735328473),i=ie(i,s,o,n,t.getUint32(48,!0),20,2368359562),n=oe(n,i,s,o,t.getUint32(20,!0),4,4294588738),o=oe(o,n,i,s,t.getUint32(32,!0),11,2272392833),s=oe(s,o,n,i,t.getUint32(44,!0),16,1839030562),i=oe(i,s,o,n,t.getUint32(56,!0),23,4259657740),n=oe(n,i,s,o,t.getUint32(4,!0),4,2763975236),o=oe(o,n,i,s,t.getUint32(16,!0),11,1272893353),s=oe(s,o,n,i,t.getUint32(28,!0),16,4139469664),i=oe(i,s,o,n,t.getUint32(40,!0),23,3200236656),n=oe(n,i,s,o,t.getUint32(52,!0),4,681279174),o=oe(o,n,i,s,t.getUint32(0,!0),11,3936430074),s=oe(s,o,n,i,t.getUint32(12,!0),16,3572445317),i=oe(i,s,o,n,t.getUint32(24,!0),23,76029189),n=oe(n,i,s,o,t.getUint32(36,!0),4,3654602809),o=oe(o,n,i,s,t.getUint32(48,!0),11,3873151461),s=oe(s,o,n,i,t.getUint32(60,!0),16,530742520),i=oe(i,s,o,n,t.getUint32(8,!0),23,3299628645),n=ae(n,i,s,o,t.getUint32(0,!0),6,4096336452),o=ae(o,n,i,s,t.getUint32(28,!0),10,1126891415),s=ae(s,o,n,i,t.getUint32(56,!0),15,2878612391),i=ae(i,s,o,n,t.getUint32(20,!0),21,4237533241),n=ae(n,i,s,o,t.getUint32(48,!0),6,1700485571),o=ae(o,n,i,s,t.getUint32(12,!0),10,2399980690),s=ae(s,o,n,i,t.getUint32(40,!0),15,4293915773),i=ae(i,s,o,n,t.getUint32(4,!0),21,2240044497),n=ae(n,i,s,o,t.getUint32(32,!0),6,1873313359),o=ae(o,n,i,s,t.getUint32(60,!0),10,4264355552),s=ae(s,o,n,i,t.getUint32(24,!0),15,2734768916),i=ae(i,s,o,n,t.getUint32(52,!0),21,1309151649),n=ae(n,i,s,o,t.getUint32(16,!0),6,4149444226),o=ae(o,n,i,s,t.getUint32(44,!0),10,3174756917),s=ae(s,o,n,i,t.getUint32(8,!0),15,718787259),i=ae(i,s,o,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=i+r[1]&4294967295,r[2]=s+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(Bb),this.buffer=new DataView(new ArrayBuffer(Me)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Rr(e,t,r,n,i,s){return t=(t+e&4294967295)+(n+s&4294967295)&4294967295,(t<<i|t>>>32-i)+r&4294967295}function se(e,t,r,n,i,s,o){return Rr(t&r|~t&n,e,t,i,s,o)}function ie(e,t,r,n,i,s,o){return Rr(t&n|r&~n,e,t,i,s,o)}function oe(e,t,r,n,i,s,o){return Rr(t^r^n,e,t,i,s,o)}function ae(e,t,r,n,i,s,o){return Rr(r^(t|~n),e,t,i,s,o)}function Mb(e){return typeof e=="string"?e.length===0:e.byteLength===0}function $b(e){return typeof e=="string"?et(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}const Ro=typeof TextEncoder=="function"?new TextEncoder:null,Fb=e=>{if(typeof e=="string"){if(Ro)return Ro.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){const n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},Ub={CrtSignerV4:null};class Db{constructor(t){this.sigv4Signer=new vf(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=Ub.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const qs="required",f="type",p="conditions",m="fn",b="argv",T="ref",L="assign",E="url",x="properties",pu="backend",Re="authSchemes",me="disableDoubleEncoding",be="signingName",Ne="signingRegion",A="headers",Gs="signingRegionSet",Lb=!1,Ee=!0,we="isSet",te="booleanEquals",C="error",br="aws.partition",D="stringEquals",z="getAttr",ce="name",Te="substring",To="bucketSuffix",gu="parseURL",Oo="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",S="endpoint",_="tree",yu="aws.isVirtualHostableS3Bucket",ur="{url#scheme}://{Bucket}.{url#authority}{url#path}",Oe="not",lr="{url#scheme}://{url#authority}{url#path}",mu="hardwareType",bu="regionPrefix",Po="bucketAliasSuffix",gs="outpostId",tt="isValidHostLabel",Vs="sigv4a",Gt="s3-outposts",at="s3",wu="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",_u="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",No="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Su="aws.parseArn",vu="bucketArn",Eu="arnType",wr="",Ws="s3-object-lambda",xu="accesspoint",Ks="accessPointName",Io="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Bo="mrapPartition",ko="outpostType",Mo="arnPrefix",Au="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",$o="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Fo="https://s3.{partitionResult#dnsSuffix}",Ot={[qs]:!1,[f]:"String"},nt={[qs]:!0,default:!1,[f]:"Boolean"},Pt={[qs]:!1,[f]:"Boolean"},xe={[m]:te,[b]:[{[T]:"Accelerate"},!0]},U={[m]:te,[b]:[{[T]:"UseFIPS"},!0]},F={[m]:te,[b]:[{[T]:"UseDualStack"},!0]},G={[m]:we,[b]:[{[T]:"Endpoint"}]},Cu={[m]:br,[b]:[{[T]:"Region"}],[L]:"partitionResult"},Uo={[m]:D,[b]:[{[m]:z,[b]:[{[T]:"partitionResult"},ce]},"aws-cn"]},_r={[m]:we,[b]:[{[T]:"Bucket"}]},fe={[T]:"Bucket"},le={[m]:gu,[b]:[{[T]:"Endpoint"}],[L]:"url"},fr={[m]:te,[b]:[{[m]:z,[b]:[{[T]:"url"},"isIp"]},!0]},Ru={[T]:"url"},Tu={[m]:"uriEncode",[b]:[fe],[L]:"uri_encoded_bucket"},Be={[pu]:"S3Express",[Re]:[{[me]:!0,[ce]:"sigv4",[be]:"s3express",[Ne]:"{Region}"}]},O={},Ou={[m]:yu,[b]:[fe,!1]},hn={[C]:"S3Express bucket name is not a valid virtual hostable name.",[f]:C},Sr={[pu]:"S3Express",[Re]:[{[me]:!0,[ce]:"sigv4-s3express",[be]:"s3express",[Ne]:"{Region}"}]},Do={[m]:we,[b]:[{[T]:"UseS3ExpressControlEndpoint"}]},Lo={[m]:te,[b]:[{[T]:"UseS3ExpressControlEndpoint"},!0]},P={[m]:Oe,[b]:[G]},jo={[C]:"Unrecognized S3Express bucket name format.",[f]:C},Ho={[m]:Oe,[b]:[_r]},zo={[T]:mu},qo={[p]:[P],[C]:"Expected a endpoint to be specified but no endpoint was found",[f]:C},Jt={[Re]:[{[me]:!0,[ce]:Vs,[be]:Gt,[Gs]:["*"]},{[me]:!0,[ce]:"sigv4",[be]:Gt,[Ne]:"{Region}"}]},pn={[m]:te,[b]:[{[T]:"ForcePathStyle"},!1]},jb={[T]:"ForcePathStyle"},q={[m]:te,[b]:[{[T]:"Accelerate"},!1]},K={[m]:D,[b]:[{[T]:"Region"},"aws-global"]},Y={[Re]:[{[me]:!0,[ce]:"sigv4",[be]:at,[Ne]:"us-east-1"}]},k={[m]:Oe,[b]:[K]},J={[m]:te,[b]:[{[T]:"UseGlobalEndpoint"},!0]},Go={[E]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:{[Re]:[{[me]:!0,[ce]:"sigv4",[be]:at,[Ne]:"{Region}"}]},[A]:{}},W={[Re]:[{[me]:!0,[ce]:"sigv4",[be]:at,[Ne]:"{Region}"}]},ee={[m]:te,[b]:[{[T]:"UseGlobalEndpoint"},!1]},B={[m]:te,[b]:[{[T]:"UseDualStack"},!1]},Vo={[E]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},I={[m]:te,[b]:[{[T]:"UseFIPS"},!1]},Wo={[E]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},Ko={[E]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},gn={[m]:te,[b]:[{[m]:z,[b]:[Ru,"isIp"]},!1]},yn={[E]:wu,[x]:W,[A]:{}},ys={[E]:ur,[x]:W,[A]:{}},Xo={[S]:ys,[f]:S},mn={[E]:_u,[x]:W,[A]:{}},Zo={[E]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},er={[C]:"Invalid region: region was not a valid DNS name.",[f]:C},pe={[T]:vu},Pu={[T]:Eu},bn={[m]:z,[b]:[pe,"service"]},Xs={[T]:Ks},Qo={[p]:[F],[C]:"S3 Object Lambda does not support Dual-stack",[f]:C},Yo={[p]:[xe],[C]:"S3 Object Lambda does not support S3 Accelerate",[f]:C},Jo={[p]:[{[m]:we,[b]:[{[T]:"DisableAccessPoints"}]},{[m]:te,[b]:[{[T]:"DisableAccessPoints"},!0]}],[C]:"Access points are not supported for this operation",[f]:C},wn={[p]:[{[m]:we,[b]:[{[T]:"UseArnRegion"}]},{[m]:te,[b]:[{[T]:"UseArnRegion"},!1]},{[m]:Oe,[b]:[{[m]:D,[b]:[{[m]:z,[b]:[pe,"region"]},"{Region}"]}]}],[C]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[f]:C},Nu={[m]:z,[b]:[{[T]:"bucketPartition"},ce]},Iu={[m]:z,[b]:[pe,"accountId"]},_n={[Re]:[{[me]:!0,[ce]:"sigv4",[be]:Ws,[Ne]:"{bucketArn#region}"}]},ea={[C]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[f]:C},Sn={[C]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[f]:C},vn={[C]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[f]:C},En={[C]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[f]:C},ta={[C]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[f]:C},ra={[C]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[f]:C},Nt={[Re]:[{[me]:!0,[ce]:"sigv4",[be]:at,[Ne]:"{bucketArn#region}"}]},na={[Re]:[{[me]:!0,[ce]:Vs,[be]:Gt,[Gs]:["*"]},{[me]:!0,[ce]:"sigv4",[be]:Gt,[Ne]:"{bucketArn#region}"}]},sa={[m]:Su,[b]:[fe]},ia={[E]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},oa={[E]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},aa={[E]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},xn={[E]:Au,[x]:W,[A]:{}},ca={[E]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},ua={[T]:"UseObjectLambdaEndpoint"},An={[Re]:[{[me]:!0,[ce]:"sigv4",[be]:Ws,[Ne]:"{Region}"}]},la={[E]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},fa={[E]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},da={[E]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},Cn={[E]:lr,[x]:W,[A]:{}},ha={[E]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},Rn=[{[T]:"Region"}],Hb=[{[T]:"Endpoint"}],zb=[fe],Tn=[F],tr=[xe],We=[G,le],pa=[{[m]:we,[b]:[{[T]:"DisableS3ExpressSessionAuth"}]},{[m]:te,[b]:[{[T]:"DisableS3ExpressSessionAuth"},!0]}],ga=[fr],On=[Tu],Pn=[Ou],st=[U],ya=[{[m]:Te,[b]:[fe,6,14,!0],[L]:"s3expressAvailabilityZoneId"},{[m]:Te,[b]:[fe,14,16,!0],[L]:"s3expressAvailabilityZoneDelim"},{[m]:D,[b]:[{[T]:"s3expressAvailabilityZoneDelim"},"--"]}],ma=[{[p]:[U],[S]:{[E]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Be,[A]:{}},[f]:S},{[S]:{[E]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Be,[A]:{}},[f]:S}],ba=[{[m]:Te,[b]:[fe,6,15,!0],[L]:"s3expressAvailabilityZoneId"},{[m]:Te,[b]:[fe,15,17,!0],[L]:"s3expressAvailabilityZoneDelim"},{[m]:D,[b]:[{[T]:"s3expressAvailabilityZoneDelim"},"--"]}],wa=[{[p]:[U],[S]:{[E]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Sr,[A]:{}},[f]:S},{[S]:{[E]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Sr,[A]:{}},[f]:S}],qb=[_r],_a=[{[m]:tt,[b]:[{[T]:gs},!1]}],Sa=[{[m]:D,[b]:[{[T]:bu},"beta"]}],Gb=["*"],$e=[Cu],va=[{[m]:tt,[b]:[{[T]:"Region"},!1]}],Fe=[{[m]:D,[b]:[{[T]:"Region"},"us-east-1"]}],Nn=[{[m]:D,[b]:[Pu,xu]}],Ea=[{[m]:z,[b]:[pe,"resourceId[1]"],[L]:Ks},{[m]:Oe,[b]:[{[m]:D,[b]:[Xs,wr]}]}],Vb=[pe,"resourceId[1]"],In=[{[m]:Oe,[b]:[{[m]:D,[b]:[{[m]:z,[b]:[pe,"region"]},wr]}]}],xa=[{[m]:Oe,[b]:[{[m]:we,[b]:[{[m]:z,[b]:[pe,"resourceId[2]"]}]}]}],Wb=[pe,"resourceId[2]"],Bn=[{[m]:br,[b]:[{[m]:z,[b]:[pe,"region"]}],[L]:"bucketPartition"}],Aa=[{[m]:D,[b]:[Nu,{[m]:z,[b]:[{[T]:"partitionResult"},ce]}]}],kn=[{[m]:tt,[b]:[{[m]:z,[b]:[pe,"region"]},!0]}],Mn=[{[m]:tt,[b]:[Iu,!1]}],Ca=[{[m]:tt,[b]:[Xs,!1]}],Ra=[{[m]:tt,[b]:[{[T]:"Region"},!0]}],Kb={parameters:{Bucket:Ot,Region:Ot,UseFIPS:nt,UseDualStack:nt,Endpoint:Ot,ForcePathStyle:nt,Accelerate:nt,UseGlobalEndpoint:nt,UseObjectLambdaEndpoint:Pt,Key:Ot,Prefix:Ot,DisableAccessPoints:Pt,DisableMultiRegionAccessPoints:nt,UseArnRegion:Pt,UseS3ExpressControlEndpoint:Pt,DisableS3ExpressSessionAuth:Pt},rules:[{[p]:[{[m]:we,[b]:Rn}],rules:[{[p]:[xe,U],error:"Accelerate cannot be used with FIPS",[f]:C},{[p]:[F,G],error:"Cannot set dual-stack in combination with a custom endpoint.",[f]:C},{[p]:[G,U],error:"A custom endpoint cannot be combined with FIPS",[f]:C},{[p]:[G,xe],error:"A custom endpoint cannot be combined with S3 Accelerate",[f]:C},{[p]:[U,Cu,Uo],error:"Partition does not support FIPS",[f]:C},{[p]:[_r,{[m]:Te,[b]:[fe,0,6,Ee],[L]:To},{[m]:D,[b]:[{[T]:To},"--x-s3"]}],rules:[{[p]:Tn,error:"S3Express does not support Dual-stack.",[f]:C},{[p]:tr,error:"S3Express does not support S3 Accelerate.",[f]:C},{[p]:We,rules:[{[p]:pa,rules:[{[p]:ga,rules:[{[p]:On,rules:[{endpoint:{[E]:Oo,[x]:Be,[A]:O},[f]:S}],[f]:_}],[f]:_},{[p]:Pn,rules:[{endpoint:{[E]:ur,[x]:Be,[A]:O},[f]:S}],[f]:_},hn],[f]:_},{[p]:ga,rules:[{[p]:On,rules:[{endpoint:{[E]:Oo,[x]:Sr,[A]:O},[f]:S}],[f]:_}],[f]:_},{[p]:Pn,rules:[{endpoint:{[E]:ur,[x]:Sr,[A]:O},[f]:S}],[f]:_},hn],[f]:_},{[p]:[Do,Lo],rules:[{[p]:[Tu,P],rules:[{[p]:st,endpoint:{[E]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[x]:Be,[A]:O},[f]:S},{endpoint:{[E]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[x]:Be,[A]:O},[f]:S}],[f]:_}],[f]:_},{[p]:Pn,rules:[{[p]:pa,rules:[{[p]:ya,rules:ma,[f]:_},{[p]:ba,rules:ma,[f]:_},jo],[f]:_},{[p]:ya,rules:wa,[f]:_},{[p]:ba,rules:wa,[f]:_},jo],[f]:_},hn],[f]:_},{[p]:[Ho,Do,Lo],rules:[{[p]:We,endpoint:{[E]:lr,[x]:Be,[A]:O},[f]:S},{[p]:st,endpoint:{[E]:"https://s3express-control-fips.{Region}.amazonaws.com",[x]:Be,[A]:O},[f]:S},{endpoint:{[E]:"https://s3express-control.{Region}.amazonaws.com",[x]:Be,[A]:O},[f]:S}],[f]:_},{[p]:[_r,{[m]:Te,[b]:[fe,49,50,Ee],[L]:mu},{[m]:Te,[b]:[fe,8,12,Ee],[L]:bu},{[m]:Te,[b]:[fe,0,7,Ee],[L]:Po},{[m]:Te,[b]:[fe,32,49,Ee],[L]:gs},{[m]:br,[b]:Rn,[L]:"regionPartition"},{[m]:D,[b]:[{[T]:Po},"--op-s3"]}],rules:[{[p]:_a,rules:[{[p]:[{[m]:D,[b]:[zo,"e"]}],rules:[{[p]:Sa,rules:[qo,{[p]:We,endpoint:{[E]:"https://{Bucket}.ec2.{url#authority}",[x]:Jt,[A]:O},[f]:S}],[f]:_},{endpoint:{[E]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[x]:Jt,[A]:O},[f]:S}],[f]:_},{[p]:[{[m]:D,[b]:[zo,"o"]}],rules:[{[p]:Sa,rules:[qo,{[p]:We,endpoint:{[E]:"https://{Bucket}.op-{outpostId}.{url#authority}",[x]:Jt,[A]:O},[f]:S}],[f]:_},{endpoint:{[E]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[x]:Jt,[A]:O},[f]:S}],[f]:_},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[f]:C}],[f]:_},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[f]:C}],[f]:_},{[p]:qb,rules:[{[p]:[G,{[m]:Oe,[b]:[{[m]:we,[b]:[{[m]:gu,[b]:Hb}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[f]:C},{[p]:[pn,Ou],rules:[{[p]:$e,rules:[{[p]:va,rules:[{[p]:[xe,Uo],error:"S3 Accelerate cannot be used in this region",[f]:C},{[p]:[F,U,q,P,K],endpoint:{[E]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[F,U,q,P,k,J],rules:[{endpoint:Go,[f]:S}],[f]:_},{[p]:[F,U,q,P,k,ee],endpoint:Go,[f]:S},{[p]:[B,U,q,P,K],endpoint:{[E]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[B,U,q,P,k,J],rules:[{endpoint:Vo,[f]:S}],[f]:_},{[p]:[B,U,q,P,k,ee],endpoint:Vo,[f]:S},{[p]:[F,I,xe,P,K],endpoint:{[E]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[F,I,xe,P,k,J],rules:[{endpoint:Wo,[f]:S}],[f]:_},{[p]:[F,I,xe,P,k,ee],endpoint:Wo,[f]:S},{[p]:[F,I,q,P,K],endpoint:{[E]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[F,I,q,P,k,J],rules:[{endpoint:Ko,[f]:S}],[f]:_},{[p]:[F,I,q,P,k,ee],endpoint:Ko,[f]:S},{[p]:[B,I,q,G,le,fr,K],endpoint:{[E]:wu,[x]:Y,[A]:O},[f]:S},{[p]:[B,I,q,G,le,gn,K],endpoint:{[E]:ur,[x]:Y,[A]:O},[f]:S},{[p]:[B,I,q,G,le,fr,k,J],rules:[{[p]:Fe,endpoint:yn,[f]:S},{endpoint:yn,[f]:S}],[f]:_},{[p]:[B,I,q,G,le,gn,k,J],rules:[{[p]:Fe,endpoint:ys,[f]:S},Xo],[f]:_},{[p]:[B,I,q,G,le,fr,k,ee],endpoint:yn,[f]:S},{[p]:[B,I,q,G,le,gn,k,ee],endpoint:ys,[f]:S},{[p]:[B,I,xe,P,K],endpoint:{[E]:_u,[x]:Y,[A]:O},[f]:S},{[p]:[B,I,xe,P,k,J],rules:[{[p]:Fe,endpoint:mn,[f]:S},{endpoint:mn,[f]:S}],[f]:_},{[p]:[B,I,xe,P,k,ee],endpoint:mn,[f]:S},{[p]:[B,I,q,P,K],endpoint:{[E]:No,[x]:Y,[A]:O},[f]:S},{[p]:[B,I,q,P,k,J],rules:[{[p]:Fe,endpoint:{[E]:No,[x]:W,[A]:O},[f]:S},{endpoint:Zo,[f]:S}],[f]:_},{[p]:[B,I,q,P,k,ee],endpoint:Zo,[f]:S}],[f]:_},er],[f]:_}],[f]:_},{[p]:[G,le,{[m]:D,[b]:[{[m]:z,[b]:[Ru,"scheme"]},"http"]},{[m]:yu,[b]:[fe,Ee]},pn,I,B,q],rules:[{[p]:$e,rules:[{[p]:va,rules:[Xo],[f]:_},er],[f]:_}],[f]:_},{[p]:[pn,{[m]:Su,[b]:zb,[L]:vu}],rules:[{[p]:[{[m]:z,[b]:[pe,"resourceId[0]"],[L]:Eu},{[m]:Oe,[b]:[{[m]:D,[b]:[Pu,wr]}]}],rules:[{[p]:[{[m]:D,[b]:[bn,Ws]}],rules:[{[p]:Nn,rules:[{[p]:Ea,rules:[Qo,Yo,{[p]:In,rules:[Jo,{[p]:xa,rules:[wn,{[p]:Bn,rules:[{[p]:$e,rules:[{[p]:Aa,rules:[{[p]:kn,rules:[{[p]:[{[m]:D,[b]:[Iu,wr]}],error:"Invalid ARN: Missing account id",[f]:C},{[p]:Mn,rules:[{[p]:Ca,rules:[{[p]:We,endpoint:{[E]:Io,[x]:_n,[A]:O},[f]:S},{[p]:st,endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:_n,[A]:O},[f]:S},{endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:_n,[A]:O},[f]:S}],[f]:_},ea],[f]:_},Sn],[f]:_},vn],[f]:_},En],[f]:_}],[f]:_}],[f]:_},ta],[f]:_},{error:"Invalid ARN: bucket ARN is missing a region",[f]:C}],[f]:_},ra],[f]:_},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[f]:C}],[f]:_},{[p]:Nn,rules:[{[p]:Ea,rules:[{[p]:In,rules:[{[p]:Nn,rules:[{[p]:In,rules:[Jo,{[p]:xa,rules:[wn,{[p]:Bn,rules:[{[p]:$e,rules:[{[p]:[{[m]:D,[b]:[Nu,"{partitionResult#name}"]}],rules:[{[p]:kn,rules:[{[p]:[{[m]:D,[b]:[bn,at]}],rules:[{[p]:Mn,rules:[{[p]:Ca,rules:[{[p]:tr,error:"Access Points do not support S3 Accelerate",[f]:C},{[p]:[U,F],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Nt,[A]:O},[f]:S},{[p]:[U,B],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Nt,[A]:O},[f]:S},{[p]:[I,F],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Nt,[A]:O},[f]:S},{[p]:[I,B,G,le],endpoint:{[E]:Io,[x]:Nt,[A]:O},[f]:S},{[p]:[I,B],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Nt,[A]:O},[f]:S}],[f]:_},ea],[f]:_},Sn],[f]:_},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[f]:C}],[f]:_},vn],[f]:_},En],[f]:_}],[f]:_}],[f]:_},ta],[f]:_}],[f]:_}],[f]:_},{[p]:[{[m]:tt,[b]:[Xs,Ee]}],rules:[{[p]:Tn,error:"S3 MRAP does not support dual-stack",[f]:C},{[p]:st,error:"S3 MRAP does not support FIPS",[f]:C},{[p]:tr,error:"S3 MRAP does not support S3 Accelerate",[f]:C},{[p]:[{[m]:te,[b]:[{[T]:"DisableMultiRegionAccessPoints"},Ee]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[f]:C},{[p]:[{[m]:br,[b]:Rn,[L]:Bo}],rules:[{[p]:[{[m]:D,[b]:[{[m]:z,[b]:[{[T]:Bo},ce]},{[m]:z,[b]:[pe,"partition"]}]}],rules:[{endpoint:{[E]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[x]:{[Re]:[{[me]:Ee,name:Vs,[be]:at,[Gs]:Gb}]},[A]:O},[f]:S}],[f]:_},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[f]:C}],[f]:_}],[f]:_},{error:"Invalid Access Point Name",[f]:C}],[f]:_},ra],[f]:_},{[p]:[{[m]:D,[b]:[bn,Gt]}],rules:[{[p]:Tn,error:"S3 Outposts does not support Dual-stack",[f]:C},{[p]:st,error:"S3 Outposts does not support FIPS",[f]:C},{[p]:tr,error:"S3 Outposts does not support S3 Accelerate",[f]:C},{[p]:[{[m]:we,[b]:[{[m]:z,[b]:[pe,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[f]:C},{[p]:[{[m]:z,[b]:Vb,[L]:gs}],rules:[{[p]:_a,rules:[wn,{[p]:Bn,rules:[{[p]:$e,rules:[{[p]:Aa,rules:[{[p]:kn,rules:[{[p]:Mn,rules:[{[p]:[{[m]:z,[b]:Wb,[L]:ko}],rules:[{[p]:[{[m]:z,[b]:[pe,"resourceId[3]"],[L]:Ks}],rules:[{[p]:[{[m]:D,[b]:[{[T]:ko},xu]}],rules:[{[p]:We,endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[x]:na,[A]:O},[f]:S},{endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:na,[A]:O},[f]:S}],[f]:_},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[f]:C}],[f]:_},{error:"Invalid ARN: expected an access point name",[f]:C}],[f]:_},{error:"Invalid ARN: Expected a 4-component resource",[f]:C}],[f]:_},Sn],[f]:_},vn],[f]:_},En],[f]:_}],[f]:_}],[f]:_},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[f]:C}],[f]:_},{error:"Invalid ARN: The Outpost Id was not set",[f]:C}],[f]:_},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[f]:C}],[f]:_},{error:"Invalid ARN: No ARN type specified",[f]:C}],[f]:_},{[p]:[{[m]:Te,[b]:[fe,0,4,Lb],[L]:Mo},{[m]:D,[b]:[{[T]:Mo},"arn:"]},{[m]:Oe,[b]:[{[m]:we,[b]:[sa]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[f]:C},{[p]:[{[m]:te,[b]:[jb,Ee]},sa],error:"Path-style addressing cannot be used with ARN buckets",[f]:C},{[p]:On,rules:[{[p]:$e,rules:[{[p]:[q],rules:[{[p]:[F,P,U,K],endpoint:{[E]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:Y,[A]:O},[f]:S},{[p]:[F,P,U,k,J],rules:[{endpoint:ia,[f]:S}],[f]:_},{[p]:[F,P,U,k,ee],endpoint:ia,[f]:S},{[p]:[B,P,U,K],endpoint:{[E]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:Y,[A]:O},[f]:S},{[p]:[B,P,U,k,J],rules:[{endpoint:oa,[f]:S}],[f]:_},{[p]:[B,P,U,k,ee],endpoint:oa,[f]:S},{[p]:[F,P,I,K],endpoint:{[E]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:Y,[A]:O},[f]:S},{[p]:[F,P,I,k,J],rules:[{endpoint:aa,[f]:S}],[f]:_},{[p]:[F,P,I,k,ee],endpoint:aa,[f]:S},{[p]:[B,G,le,I,K],endpoint:{[E]:Au,[x]:Y,[A]:O},[f]:S},{[p]:[B,G,le,I,k,J],rules:[{[p]:Fe,endpoint:xn,[f]:S},{endpoint:xn,[f]:S}],[f]:_},{[p]:[B,G,le,I,k,ee],endpoint:xn,[f]:S},{[p]:[B,P,I,K],endpoint:{[E]:$o,[x]:Y,[A]:O},[f]:S},{[p]:[B,P,I,k,J],rules:[{[p]:Fe,endpoint:{[E]:$o,[x]:W,[A]:O},[f]:S},{endpoint:ca,[f]:S}],[f]:_},{[p]:[B,P,I,k,ee],endpoint:ca,[f]:S}],[f]:_},{error:"Path-style addressing cannot be used with S3 Accelerate",[f]:C}],[f]:_}],[f]:_}],[f]:_},{[p]:[{[m]:we,[b]:[ua]},{[m]:te,[b]:[ua,Ee]}],rules:[{[p]:$e,rules:[{[p]:Ra,rules:[Qo,Yo,{[p]:We,endpoint:{[E]:lr,[x]:An,[A]:O},[f]:S},{[p]:st,endpoint:{[E]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[x]:An,[A]:O},[f]:S},{endpoint:{[E]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[x]:An,[A]:O},[f]:S}],[f]:_},er],[f]:_}],[f]:_},{[p]:[Ho],rules:[{[p]:$e,rules:[{[p]:Ra,rules:[{[p]:[U,F,P,K],endpoint:{[E]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[U,F,P,k,J],rules:[{endpoint:la,[f]:S}],[f]:_},{[p]:[U,F,P,k,ee],endpoint:la,[f]:S},{[p]:[U,B,P,K],endpoint:{[E]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[U,B,P,k,J],rules:[{endpoint:fa,[f]:S}],[f]:_},{[p]:[U,B,P,k,ee],endpoint:fa,[f]:S},{[p]:[I,F,P,K],endpoint:{[E]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Y,[A]:O},[f]:S},{[p]:[I,F,P,k,J],rules:[{endpoint:da,[f]:S}],[f]:_},{[p]:[I,F,P,k,ee],endpoint:da,[f]:S},{[p]:[I,B,G,le,K],endpoint:{[E]:lr,[x]:Y,[A]:O},[f]:S},{[p]:[I,B,G,le,k,J],rules:[{[p]:Fe,endpoint:Cn,[f]:S},{endpoint:Cn,[f]:S}],[f]:_},{[p]:[I,B,G,le,k,ee],endpoint:Cn,[f]:S},{[p]:[I,B,P,K],endpoint:{[E]:Fo,[x]:Y,[A]:O},[f]:S},{[p]:[I,B,P,k,J],rules:[{[p]:Fe,endpoint:{[E]:Fo,[x]:W,[A]:O},[f]:S},{endpoint:ha,[f]:S}],[f]:_},{[p]:[I,B,P,k,ee],endpoint:ha,[f]:S}],[f]:_},er],[f]:_}],[f]:_}],[f]:_},{error:"A region must be set when sending requests to S3.",[f]:C}]},Xb=Kb,Zb=(e,t={})=>id(Xb,{endpointParams:e,logger:t.logger});gr.aws=sc;const Qb=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??ms,base64Encoder:(e==null?void 0:e.base64Encoder)??ws,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Zb,extensions:(e==null?void 0:e.extensions)??[],getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??el,logger:(e==null?void 0:e.logger)??new Ta,sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??cl,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??Db,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??yr,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??et,utf8Encoder:(e==null?void 0:e.utf8Encoder)??bs}),Yb=["in-region","cross-region","mobile","standard","legacy"],Jb=({defaultsMode:e}={})=>Ka(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(ew()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Yb.join(", ")}, got ${t}`)}}),ew=()=>{var r,n;const e=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?cu.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},tw=e=>{const t=Jb(e),r=()=>t().then(Pl),n=Qb(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Fb,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(i=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??$0({serviceId:n.serviceId,clientVersion:uy.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??Tb,maxAttempts:(e==null?void 0:e.maxAttempts)??mr,md5:(e==null?void 0:e.md5)??kb,region:(e==null?void 0:e.region)??Nb("Region is missing"),requestHandler:_s.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await r()).retryMode||jd),sha1:(e==null?void 0:e.sha1)??Hc.Sha1,sha256:(e==null?void 0:e.sha256)??Jc.Sha256,streamCollector:(e==null?void 0:e.streamCollector)??Oa,streamHasher:(e==null?void 0:e.streamHasher)??Pb,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(yd)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(md))}},rw=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},nw=e=>({region:e.region()}),$n=e=>e,sw=(e,t)=>{const r={...$n(rw(e)),...$n(Ml(e)),...$n(Bu(e))};return t.forEach(n=>n.configure(r)),{...e,...nw(r),...$l(r),...ku(r)}};class gw extends Zu{constructor(...[t]){const r=tw(t||{}),n=mh(r),i=bd(n),s=Ld(i),o=uh(s),a=o,u=kf(a),c=Cf(u,{session:[()=>this,ay]}),l=Lf(c),h=wd(l),d=sw(h,(t==null?void 0:t.extensions)||[]);super(d),this.config=d,this.middlewareStack.use(gh(this.config)),this.middlewareStack.use(vd(this.config)),this.middlewareStack.use(ju(this.config)),this.middlewareStack.use(qu(this.config)),this.middlewareStack.use(Xu(this.config)),this.middlewareStack.use(Df(this.config)),this.middlewareStack.use(If(this.config)),this.middlewareStack.use(Uu(this.config)),this.middlewareStack.use(ql(this.config)),this.middlewareStack.use(Af(this.config)),this.middlewareStack.use(gd(this.config))}destroy(){super.destroy()}}export{Ba as C,Ce as H,Ta as N,uw as P,gw as S,Dd as a,qe as b,bh as c,dw as d,du as e,cw as f,Ud as g,fw as h,lf as i,hw as j,lt as r,lw as s,kt as t};
